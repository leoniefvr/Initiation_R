{"title":"Exercice 3 : Statistiques descriptives","markdown":{"yaml":{"title":"Exercice 3 : Statistiques descriptives","code-fold":true,"toc":true,"toc-expand":2,"toc-depth":2,"number-sections":true,"theme":{"light":"flatly","dark":"darkly"}},"headingText":"Commencer un programme","containsRefs":false,"markdown":"\n\nNous avons précédemment créé une base de travail propre permettant d'en retirer des statistiques descriptives. Celles-ci peuvent être calculées de façon à résumer le dataframe ou bien être intégrées à celui-ci via une variable supplémentaire.\n\n\n1.  Créer un nouveau programme puis l'enregister dans le projet créé précedemment.\n\n2.  Charger les packages `dplyr`, `lubridate`, `tidyr`. \n    ```{r, eval=FALSE, echo=TRUE}\n#install.packages(\"ggplot\") # Permet d'installer le package si besoin\nlibrary(\"dplyr\")\nlibrary(\"lubridate\") # Package de gestion des dates\nlibrary(\"tidyr\")\n    ```\n\n3.  Importer le dataframe précédemment enregistré au format `.Rdata`.\n    ```{r, eval=FALSE, echo=TRUE}\nload(\"df.Rdata\") # Chargement du dataframe\n    ```\n    \n---\n\n# Produire des statistiques descriptives pour résumer ses données\n\nNos données sont désormais propres, on peut donc commencer à faire des statistiques descriptives par catégorie.\n\n1.  Connaitre les statistiques descriptives du dataframe avec `summary()`.\n    ```{r, eval=FALSE, echo=TRUE}\nsummary(df_final) # Permet de connaitre les statistiques descriptive des variables du dataframe\n    ``` \n\n:::{.callout-warning}\nLa fonction `summary()` utilisée ici ne tient pas compte des pondérations. Les statistiques calculées à partir de la table de l'EEC doivent être pondérées.\n:::\n\n2.  A l'aide de pipe, faire la somme des effectifs par `trimestre` avec la fonction `summarise()`.\n    ```{r, eval=FALSE, echo=TRUE}\nnb_individu <- df_final %>% \n      group_by(trimestre) %>% \n      summarise(individu = sum(effectif, na.rm = TRUE)) \n    ``` \n\n3.  Créer un dataframe avec la moyenne (`mean()`), le premier quartiles (`quantile()`) et la médiane (`median()`) du nombre d'individu en fonction de la variable `SEXE`.\n    ```{r, eval=FALSE, echo=TRUE}\nnb_individu_mean = df %>% \n  group_by(SEXE) %>% \n  summarise(mean = mean(effectif, na.rm = TRUE),\n            median = median(effectif, na.rm = TRUE),\n            quantile_1 = quantile(effectif, 0.25))\n    ``` \n\n---\n\n#   Produire des statistiques descriptives dans un dataframe exhaustif \n\nAuparavant, nous avons vu comment résumer un dataframe à l'aide de `group_by()` et `summarise()`. On cherche désormais à ajouter des variables aggrégées dans le dataframe sans perdre l'information au niveau individuel. \n\n1.  A partir du dataframe, ajouter une variable indiquant le nombre d'individus moyen par `trimestre` et `defintion` à l'aide de `mutate()`.\n    ```{r, eval=FALSE, echo=TRUE}\n... %>% \n  group_by(trimestre, defintion) %>% \n  mutate(sum_actif = mean(effectif, na.rm = TRUE)) %>% \n  ungroup()\n    ```\n\n2.  Ajouter ensuite une variable du nombre total d'individus sur le trimestre.\n    ```{r, eval=FALSE, echo=TRUE}\n... %>% \n  group_by(trimestre, definition) %>% \n  mutate(indiv = sum(effectif, na.rm = TRUE)) \n    ```\n\n---\n\n# Calculer le nombre de chômeur par trimestre\n1.  Créer un dataframe de résultat avec le nombre d'individus par `trimestre` et catégorie (`defintion`) avec la fonction `group_by()`. \n    ```{r, eval=FALSE, echo=TRUE}\nchomage <- df_final %>% \n  group_by(trimestre, defintion) %>% \n  summarise(effectif_actif_trim = sum(effectif, na.rm = TRUE)) \n    ``` \n    \n2.  Calculer la part de chaque modalité par trimestre dans le nombre d'individus total. \n    ```{r, eval=FALSE, echo=TRUE}\ntaux_chomage <- chomage %>% \n  group_by(trimestre) %>% \n  mutate(effectif_total = sum(effectif, na.rm = TRUE)) %>% \n  ungroup() %>% \n  mutate(taux = (effectif_actif_trim / effectif_total)*100)\n    ``` \n\n---\n\n# Mettre en forme ses résultats \n\n1.  Créer un dataframe avec le nombre d'individus en ayant une colonne par définition à l'aide de la fonction `pivot_wider()`. \n    ```{r, eval=FALSE, echo=TRUE}\ndf_pivot <- nb_individu_trim_definition %>% \n      pivot_wider(names_from = c(ACTEU,definition), values_from = c(effectif,taux))\n    ```     \n\n2.  Faire l'opération inverse à l'aide de la fonction `pivot_longer()`. \n    ```{r, eval=FALSE, echo=TRUE}\ndf_unpivot <- df_pivot %>% \n      pivot_longer(!c(trimestre), names_to = \"definition\", values_to = \"effectif\")\n    ```\n\n# Exporter ses résultats\n\n1.  Télécharger et charger le package `xlsx`.\n    ```{r, eval=FALSE, echo=TRUE}\ninstall.packages(xlsx) # Installation du package\nlibrary(xlsx) # Chargement du package\n    ``` \n\n2.  Exporter le dataframe de statistique descriptive en `.xlsx` via la fonction `write_xlsx()`.\n    ```{r, eval=FALSE, echo=TRUE}\nwrite_xlsx(df_pivot, \"resultat.xlsx\") # Export du fichier excel\n    ```\n\n3.  Exporter plusieurs de ses résultats dans un seul fichier excel via `list()` et la fonction `write_xlsx()`.\n    ```{r, eval=FALSE, echo=TRUE}\nliste_onglet = list(\"statut_bit\" = df_pivot,\n                    \"taux_chomage\" = taux_chomage)\nwrite_xlsx(liste_onglet, \"resultat_total.xlsx\") # Export du fichier excel\n    ```\n\n4.  Exporter ses résultats au format .csv avec `write_csv2()` ainsi qu'au format `.Rdata`.\n    ```{r, eval=FALSE, echo=TRUE}\nwrite.csv2()\nsave(df_pivot, file = \"df_pivot.Rdata\")\n    ```    \n\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"wrap","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"toc-depth":2,"number-sections":true,"output-file":"exercice_3.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.269","theme":{"light":"flatly","dark":"darkly"},"code-copy":true,"title":"Exercice 3 : Statistiques descriptives","toc-expand":2},"extensions":{"book":{"multiFile":true}}}}}