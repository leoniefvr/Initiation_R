[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "exercice_1.html",
    "href": "exercice_1.html",
    "title": "Exercice 1 : D√©buter avec R",
    "section": "",
    "text": "1 D√©buter avec R\n\nOuvrir R et cr√©er un nouveau script R.\nEnregistrer ce nouveau fichier dans un dossier puis v√©rifier que le fichier est bien enregistr√©.\nFermer R puis ouvrir √† nouveau votre fichier. Un programme R est suffix√© par .R.\nInstaller et charger le package dplyr avec la fonction library.\n\n\nCode\ninstall.packages(\"dplyr\") # Installation du package\nlibrary(\"dplyr\") # Chargement du package\n\n\nV√©rifier la bonne installation et le bon chargement du package √† l‚Äôaide des informations de la console ou des commandes library() et search().\n\n\nCode\nlibrary() # Permet de connaitre les packages install√©s\nsearch() # Permet de connaitre  les packages charg√©s pour la session de travail\n\n\n\n\n\n\n2 Cr√©er des objets\n\nAssigner √† x la valeur 5, v√©rifier que ceci a bien √©t√© fait √† l‚Äôaide de la console ou de l‚Äôenvironnement.\n\n\nCode\nx &lt;- 5 # Assignation √† x la valeur 5\nprint(x) # Affichage de la valeur de x \nx # Affichage de la valeur de x \n\n\n\nLorsque l‚Äôon cr√©√© des objets, on va toujours leur assigner un nom, ceci permet de les garder en m√©moire vive et d‚Äôy avoir acc√®s pendant la session de travail. On peut ensuite retrouver ses objets dans l‚Äôenvironnement. Pour tous les nouveaux objets que nous allons cr√©er, vous devrez leur assigner un nom.\n\n\n\n\n\n\nCaution\n\n\n\nCes objets sont stock√©s en m√©moire vive pour la dur√©e de la session de travail R. Cela signifie qu‚Äôils sont d√©finitivement perdus lorsque RStudio est ferm√©. Pour conserver des objets en dur sur le disque, il faut utiliser des fonctions d‚Äôexport.\n\n\n\nCr√©er un vecteur de 5 pr√©noms nomm√© vec_prenom avec c().\n\n\nCode\nvec_prenom &lt;- c(\"prenom_1\", \"prenom_2\", \"prenom_3\", \"prenom_4\", \"prenom_5\") # Cr√©ation        d'un vecteur \n\n\nAfficher le type du vecteur vec_prenom avec la fonction class().\n\n\nCode\nclass(vec_prenom) # Affichage du type de l'objet vec_prenom\n\n\nAurait-il √©t√© possible d‚Äôajouter un √©l√©ment num√©rique dans ce vecteur ?\nCr√©er une liste de 5 pr√©noms nomm√©e liste_prenom avec list().\n\n\nCode\nliste_prenom &lt;- list(\"prenom_1\", \"prenom_2\", \"prenom_3\", \"prenom_4\", \"prenom_5\") #     v      Cr√©ation d'une liste \n\n\nAfficher le type de liste_prenom :\n\n\nCode\nclass(liste_prenom) #Affichage du type de l'objet liste_prenom\n\n\nAurait-il √©t√© possible d‚Äôajouter un √©l√©ment num√©rique dans ce vecteur ? Et un bool√©en ?\nCr√©er une matrice avec 2 lignes et 3 colonnes remplie de nombres avec matrix.\n\n\nCode\nmatrice &lt;- matrix(c(1, 2, 3, 11, 12, 13), nrow = 2, ncol = 3)\n\n\nCr√©er un vecteur de nombres allant de 1 √† 20 par pas de 2 √† l‚Äôaide de la fonction seq().\n\n\nCode\nvec_1_20 &lt;- seq(from = 1, to = 20, by =2)\n\n\n\n\n\n\n3 Les dataframes\n\nCr√©er un dataframe nomm√© df avec 3 lignes et 2 colonnes prenom et age avec la fonction data.frame(). Remplir les variables avec les valeurs de votre choix.\n\n\nCode\ndf &lt;- data.frame(prenom = c(\"prenom_1\", \"prenom_2\", \"prenom_3\"),\n                 age = c(52, 25, 10))\n\n\nAnalyser la classe et le type des objets que l‚Äôon vient de cr√©er avec la fonction str().\n\n\nCode\nstr(object = df) # Permet de connaitre la structure d'un objet\nclass(df) # Permet de connaitre le type d'un objet \n\n\nConnaitre le nom des colonnes du dataframe avec colnames(), le nombre de lignes avec nrow(), de colonnes avec ncol().\n\n\nCode\ncolnames(df) # Permet de connaitre le nom des colonnes d'un data frame\nnrow(df) # Permet de connaitre le nombre de lignes d'un data frame\nncol(df) # Permet de connaitre le nombre de colonnes d'un data frame\n\n\nAfficher les valeurs de la variable prenom du dataframe cr√©√© avec $.\n\n\nCode\ndf$prenom # Affichage (s√©lection) de la colonne prenom du data frame\n\n\nR√©cup√©rer le vecteur prenom √† partir du dataframe et le stocker dans un nouvel objet\n\n\nCode\nnouvel_objet &lt;- df$prenom # R√©cup√©rer le vecteur prenom √† partir du dataframe\n\n\nDe quel type est ce nouvel objet ?\n\n\n\n4 Changer le type d‚Äôun objet\n\nPasser d‚Äôune liste √† un vecteur avec unlist() et d‚Äôun vecteur √† une liste avec as.list().\n\n\nCode\ndelister &lt;- unlist(liste_prenom)\nlister &lt;- as.list(vec_prenom) # Passage √† un type liste\n\n\nPasser d‚Äôune matrice √† un dataframe avec as.data.frame().\n\n\nCode\ndataframer &lt;- as.data.frame(matrice) # Passage √† un dataframe\n\n\n\n\n\n\n5 Nettoyer son environnement\n\nSupprimer les objets que l‚Äôon vient de cr√©er √† l‚Äôaide de rm(). Les objets sont supprim√©s de l‚Äôenvironnement et ne sont donc plus accessibles du tout.\n\n\nCode\nrm(df) # suppression de son environnement le dataframe df\n\n\nLib√©rer sa m√©moire √† l‚Äôaide de la fonction gc(). Ceci permet de lib√©rer de la m√©moire lorsque l‚Äôon travaille avec des bases volumineuses.\n\n\nCode\ngc() # Permet de lib√©rer la m√©moire inutilis√©e\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nNormalement, la gestion de la m√©moire vive en R est automatique : lorsqu‚Äôun objet n‚Äôest plus accessible car on l‚Äôa retir√© de l‚Äôenvironnement, R le supprime de la m√©moire vive automatiquement. N√©anmoins, lorsqu‚Äôune base de donn√©es tr√®s volumineuses est trait√©e, utiliser gc() permet de forcer la lib√©ration de la m√©moire vive compl√®te avant de lancer une nouvelle ligne de programmation.\n\n\n\n\n\n6 Connaitre son dataframe\nOn va utiliser ici le dataframe iris qui est disponible en libre acc√®s depuis R. Il suffit de taper iris dans R pour le voir apparaitre. On va donc l‚Äôassigner √† un nom pour le garder en m√©moire et pouvoir faire nos manipulations sur celui-ci.\n\n\n\n\n\n\nDataframe iris\n\n\n\n\n\n\n\n  Sepal.Length Sepal.Width Petal.Length Petal.Width Species\n1          5.1         3.5          1.4         0.2  setosa\n2          4.9         3.0          1.4         0.2  setosa\n3          4.7         3.2          1.3         0.2  setosa\n4          4.6         3.1          1.5         0.2  setosa\n5          5.0         3.6          1.4         0.2  setosa\n\n\n\n\n\n\nAssigner la table iris au nom df_iris.\n\n\nCode\ndf_iris &lt;- iris # Assignation de iris au nom df_iris\n\n\nSe renseigner sur l‚Äôobjet iris :\n\n\nLe type de l‚Äôobjet avec class()\nLe nom des variables avec colnames()\nLe type de variable avec str()\n\n\nCode\nclass(df_iris) # Type de l'objet\ncolnames(df_iris) # Nom des variables\nstr(df_iris) # Types des variables\n\n\n\n\nConnaitre le nombre de lignes avec nrow(), de colonnes avec ncol(), d‚Äôobservations avec count().\n\n\nCode\nncol(df_iris) # Nombre de colonnes\nnrow(df_iris) # Nombre de lignes\ncount(df_iris) # Nombre d'observations = nombre de lignes\n\n\nConnaitre les modalit√©s de la variable Species √† l‚Äôaide de la fonction unique(). On cherche √† avoir les modalit√©s distinctes ici.\n\n\nCode\nunique(df_iris$Species) # Permet d'obtenir les modalit√©s distinctes de la variable Species\n\n\n\n\n\n\n7 Manipuler son dataframe\nOn va d√©sormais utiliser les pipes (`%&gt;%``) pour manipuler et transformer ses donn√©es. A chaque question, vous devez cr√©er un nouvel objet auquel vous assignez un nom.\n\nA l‚Äôaide d‚Äôun pipe (%&gt;%) et de la fonction select(), cr√©er un dataframe avec une seule variable du dataframe iris.\n\n\nCode\ndf_1_variable &lt;- df_iris %&gt;% \n  select(Species)\n\n\nA l‚Äôaide d‚Äôun pipe (%&gt;%) et de la fonction mutate(), cr√©er une variable correspondant √† la somme des variables Sepal.Length et Sepal.Width.\n\n\nCode\ndf_somme_iris &lt;- df_iris %&gt;% \n  mutate(somme = Sepal.Length + Sepal.Width)\n\n\nA l‚Äôaide d‚Äôun pipe (%&gt;%) et de la fonction filter(), garder uniquement les observations pour lesquelles Petal.Width est sup√©rieur √† 0.2.\n\n\nCode\ndf_grande_petale &lt;- df_iris %&gt;% \n  filter(Petal.Width &gt; 0.2) # Seules les lignes o√π Petal.Width &gt; 0.2 sont conserv√©es dans df_grande_petale\n\n\nA l‚Äôaide d‚Äôun pipe (%&gt;%) et de la fonction rename(), renommer la variableSpeciesparespece`.\n\n\nCode\ndf_renomme &lt;- df_iris %&gt;% \n  rename(espece = Species) # Remplacement du nom de la variable Species par espece\n\n\nA l‚Äôaide d‚Äôun pipe (%&gt;%) et de la fonction mutate(), passer la variable Sepal.Length au format caract√®re.\n\n\nCode\ndf_sepal_char &lt;- df_iris %&gt;% \n  mutate(Sepal.Length = as.character(Sepal.Length)) # Passage de la variable Sepal.Length au format caract√®re\n\n\nA l‚Äôaide d‚Äôun pipe (%&gt;%) et de la fonction arrange(), trier le dataframe en fonction de Sepal.Length, par ordre d√©croissant.\n\n\nCode\ndf_sepal_tri &lt;- df_iris %&gt;% \n  arrange(desc(Sepal.Length)) # Tri du dataframe en fonction de la variable Sepal.Length, par ordre d√©croissant\n\n\n\n\n\n\n8 Enchainer les pipes\n\nEn partant du dataframe iris, cr√©er un dataframe nomm√© df_pipe en encha√Ænant les √©tapes ci-dessous.\n\nGarder uniquement les observations pour les Species setosa et versicolor\nRenommer la variable Petal.Length par longueur_petale\nCr√©er la variable long_large correspondant au produit de Sepal.Length et Sepal.Width\nRetirer la variable Petal.Width\nTrier en fonction de longueur_petale\n\n\n\nCode\ndf_pipe &lt;- iris %&gt;% \n  filter(Species %in% c(\"setosa\", \"versicolor\")) %&gt;% \n  rename(longueur_petale = Petal.Length) %&gt;% \n  mutate(long_large = Sepal.Length * Sepal.Width) %&gt;% \n  select(-Petal.Width) %&gt;% \n  arrange(longueur_petale)\n\n\nEn partant du dataframe iris, cr√©er un dataframe nomm√© df_final en encha√Ænant les √©tapes ci-dessous.\n\nRenommer les variables pour qu‚Äôelles soient en minuscules avec les fonctions rename_all() et tolower()\nNe garder que les observations pour lesquelles Sepal.Length est diff√©rent de 5.8\nCr√©er une variable oui_non √©gale √† 1 lorsque Sepal.Width √©gale √† 3.5 et 0 sinon √† l‚Äôaide de la fonction ifelse()\n\n\n\nCode\ndf_final &lt;- iris %&gt;%\n  rename_all(tolower) %&gt;% \n  filter(sepal.length != 5.8) %&gt;% \n  mutate(oui_non = ifelse(sepal.width == 3.5, 1, 0))\n\n\nEnregister son fichier, nettoyer son environnement et passer √† l‚Äôexercice 2.",
    "crumbs": [
      "Exercice 1"
    ]
  },
  {
    "objectID": "slides.html#un-rapide-tour-de-table-pour-apprendre-√†-se-conna√Ætre",
    "href": "slides.html#un-rapide-tour-de-table-pour-apprendre-√†-se-conna√Ætre",
    "title": "Prise en main des donn√©es avec R",
    "section": "Un rapide tour de table pour apprendre √† se conna√Ætre üôÇ",
    "text": "Un rapide tour de table pour apprendre √† se conna√Ætre üôÇ",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#pourquoi-r",
    "href": "slides.html#pourquoi-r",
    "title": "Prise en main des donn√©es avec R",
    "section": "Pourquoi R ?",
    "text": "Pourquoi R ?\n\n\n\n‚≠ê Open source et gratuit ‚≠ê\nüåê Harmonisation des langages au sein du SSP üåê\nüìà Analyse statistique avanc√©e üìà\nüå≥ Vaste √©cosyst√®me : extensions appel√©es ‚Äúpackages‚Äù (environ 20 000) üå≥\nü§ù Communaut√© importante : facilit√©s pour trouver de l‚Äôaide ü§ù",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#quel-avantages-de-r-pour-la-dares",
    "href": "slides.html#quel-avantages-de-r-pour-la-dares",
    "title": "Prise en main des donn√©es avec R",
    "section": "Quel avantages de R pour la Dares ?",
    "text": "Quel avantages de R pour la Dares ?\n\nHomog√©n√©iser les pratiques au sein du SSP\nRenforcer l‚Äôattractivit√© de la Dares, dans un contexte o√π les sortants d‚Äô√©cole sont plus fr√©quemment form√©s √† R/Python\nD√©velopper certains mod√®les dits Big Data et Machine learning tr√®s r√©cents impl√©ment√©s sous R et Python : l‚Äôexemple de Jocas √† la Dares sous Python et des recommandations du GT Big Data\nProfiter de l‚Äôint√©gration de R √† d‚Äôautres outils comme Git, qui facilitent le travail collaboratif",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#fonctionnement-de-r",
    "href": "slides.html#fonctionnement-de-r",
    "title": "Prise en main des donn√©es avec R",
    "section": "Fonctionnement de R",
    "text": "Fonctionnement de R\n\n\nR est un environnement et un langage de programmation\nLangage interpr√©t√© : plus proche de notre langage que du langage machine\nLangage compil√© : les commandes tap√©es sont ex√©cut√©es directement\nLangage objet : on assigne une valeur √† quelque chose (a &lt;- 1). Le symbole &lt;- d√©signe l‚Äôassignation. Les objets sont pr√©sents dans la m√©moire vive de l‚Äôordinateur (RAM) et l‚Äôassignation est une mani√®re d‚Äôy avoir acc√®s.\n\n‚õîAttention : le symbole = permet √©galement l‚Äôassignation, mais c‚Äôest une tr√®s mauvaise pratique de l‚Äôutiliser comme tel. Le symbole = est utilis√© de pr√©f√©rence pour renseigner la valeur des arguments des fonctions dans R. Vous pourrez n√©anmoins le rencontrer parfois comme mani√®re d‚Äôassigner. ‚õî",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#les-sp√©cificit√©s-de-r",
    "href": "slides.html#les-sp√©cificit√©s-de-r",
    "title": "Prise en main des donn√©es avec R",
    "section": "Les sp√©cificit√©s de R",
    "text": "Les sp√©cificit√©s de R\n\nToutes les op√©rations sont enregistr√©es dans la m√©moire vive de l‚Äôordinateur (RAM) :\n\nCela peut poser des probl√®mes lors de la manipulation de donn√©es volumineuses.\nEn SAS, la m√©moire RAM est sollicit√©e au minimum, des fichiers temporaires sont cr√©√©s.\n\n\n\n\n\n\n‚õîImpossible de charger des donn√©es de 50GO avec un ordinateur ayant 32GO de RAM ‚õî\n\n\n\nAttention : R distingue les minuscules et les majuscules",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#le-travail-en-m√©moire-vive-√†-la-dares",
    "href": "slides.html#le-travail-en-m√©moire-vive-√†-la-dares",
    "title": "Prise en main des donn√©es avec R",
    "section": "Le travail en m√©moire vive √† la Dares",
    "text": "Le travail en m√©moire vive √† la Dares\nLa m√©moire vive en R est donc utilis√©e √† la fois pour charger les donn√©es √† manipuler et pour r√©aliser les calculs demand√©s.\nLa Dares re√ßoit des donn√©es administratives parfois cons√©quentes, plus volumineuses que la m√©moire vive des ordinateurs portables fournis. Dans ce cas, diff√©rentes solutions existent et se d√©veloppent au sein du SSP :\n\nCr√©er un √©chantillon des donn√©es √† la r√©ception, mais cela peut poser probl√®me pour travailler sur des sous-populations ;\nLe format de donn√©es compress√©es parquet, qui peut √™tre manipul√© avec les packages arrow et duckdb, se d√©veloppe √† l‚ÄôInsee ;\nLorsque les donn√©es sont beaucoup plus volumineuses que la m√©moire vive et doivent √™tre trait√©es avec un serveur, des solutions telles que le calcul distribu√© avec Spark peuvent √™tre envisag√©es. Un atelier d‚Äôexemple de manipulation des donn√©es MiDAS avec Spark sous R et sous CASD est pr√©vu dans l‚Äôann√©e pour illustrer ces solutions.",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#la-console",
    "href": "slides.html#la-console",
    "title": "Prise en main des donn√©es avec R",
    "section": "La console",
    "text": "La console\n\n\nLa console est un peu comme une calculatrice, elle ex√©cute mais ne stocke pas :\n\nEntrer les commandes\nAfficher les r√©sultats\nAfficher les messages d‚Äôerreur\nNe stocke pas d‚Äôinformation\n\n\n\nCodeR√©sultat\n\n\n\n152/17\n\n\n\n\n\n[1] 8.941176",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#lenvironnement",
    "href": "slides.html#lenvironnement",
    "title": "Prise en main des donn√©es avec R",
    "section": "L‚Äôenvironnement :",
    "text": "L‚Äôenvironnement :\n\n\n\n\nEtat de la m√©moire \nR√©pertoire des donn√©es (stockage des objets) \nImport de donn√©es en mode ‚Äúclic-bouton‚Äù\n\n\ntest_environnement &lt;- 1+1",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#files-packages-help",
    "href": "slides.html#files-packages-help",
    "title": "Prise en main des donn√©es avec R",
    "section": "Files, packages, help ‚Ä¶",
    "text": "Files, packages, help ‚Ä¶\n\n\n\nFilesPlotsPackagesHelp\n\n\n\nObtenir le chemin √† la racine de ma working directory :\n\ngetwd()\n\n\nLa working directory est l‚Äôendroit o√π R lit et exporte par d√©faut les fichiers.\n\n\n\nFen√™tre d‚Äôaffichage des graphiques :\n\nplot(100)\n\n\n\n\nPermet de voir les packages install√©s et charg√©s.\n\nlibrary(\"existepas\")\n\nPermet √©galement de les installer, les mettre √† jour et les charger en clic bouton.\n\n\n\nPermet d‚Äôacc√©der √† la documentation des fonctions, ainsi qu‚Äô√† des exemples. Par exemple, je ne comprends pas la fonction mean() :\n\nhelp(\"mean\")\n\n#ou\n\n?mean\n\nLa documentation de la fonction s‚Äôaffiche dans la fen√™tre Help.",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#utiliser-laide",
    "href": "slides.html#utiliser-laide",
    "title": "Prise en main des donn√©es avec R",
    "section": "Utiliser l‚Äôaide",
    "text": "Utiliser l‚Äôaide\n\nLes fonctions des packages sont document√©es (de mani√®re in√©gale selon les packages‚Ä¶), et les arguments principaux de chaque fonction sont pr√©sent√©s dans l‚Äôaide, avec des exemples d‚Äôappel de la fonction.\n\n\n\n\n\n\n\nBonne pratique\n\n\nLorsqu‚Äôon appelle une fonction dans R, R d√©tecte souvent automatiquement les arguments sans qu‚Äôon ait besoin de les nommer explicitement. Pour des raisons de lisibilit√© du code, il est recommand√© de les nommer syst√©matiquement.\n\n\n\n\n\nun_vecteur &lt;- c(2, 3 ,9 , 45, 10)\n\n###Bonne pratique###\nmean(x = un_vecteur)\n\n[1] 13.8\n\n###Mauvaise pratique###\nmean(un_vecteur)\n\n[1] 13.8",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#limportance-des-packages",
    "href": "slides.html#limportance-des-packages",
    "title": "Prise en main des donn√©es avec R",
    "section": "L‚Äôimportance des packages",
    "text": "L‚Äôimportance des packages\nPour installer un package dans la console, on utilise :\n\ninstall.packages(\"dplyr\")\n\n\n\n\n\n\n\nBonne pratique\n\n\nNe pas laisser dans un script R (un fichier de code) l‚Äôinstruction install.packages(), car lors de la transmission d‚Äôun script, la personne peut l‚Äôex√©cuter par erreur alors que le package est d√©j√† install√©/√† jour sur son poste de travail.\n\n\n\nCela permet de charger (ou mettre √† jour) le package sur disque, depuis le CRAN. cette instruction n√©cessite donc une connexion √† internet.\nOn charge ensuite le package en m√©moire vive :\n\nlibrary(\"dplyr\")\n\n\nL‚Äôinstallation du package n‚Äôest √† ex√©cuter qu‚Äôune seule fois\ninstall.packages() permet aussi de r√©cup√©rer une version mise √† jour disponible sur le CRAN\nLe chargement en m√©moire vive (avec library()) doit √™tre effectu√© au d√©but de chaque session ouverte de R pour avoir acc√®s aux fonctionnalit√©s du package.\n\n\n\n\n\n\n\nWarning\n\n\n‚õî Il existe un grand nombre de packages, mais certains sont DEPRECATED : leur utilisation n‚Äôest plus recommand√©e car ils ne sont plus mis √† jour et entretenus. Pour assurer la p√©rennit√© d‚Äôun programme, (cha√Æne de production), il est recommand√© de n‚Äôutiliser que des packages largemment utilis√©s, r√©guli√®rement mis √† jour et recommand√© par la communaut√© (sur UtilitR par exemple).‚õî",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#travailler-avec-les-projets-r-studio-quest-ce-que-cest",
    "href": "slides.html#travailler-avec-les-projets-r-studio-quest-ce-que-cest",
    "title": "Prise en main des donn√©es avec R",
    "section": "Travailler avec les projets R Studio : qu‚Äôest-ce que c‚Äôest ?",
    "text": "Travailler avec les projets R Studio : qu‚Äôest-ce que c‚Äôest ?\nIl est recommand√© de regrouper les scripts et autres fichiers relatifs √† un m√™me ‚Äúprojet statistique‚Äù ou √† une m√™me cha√Æne de production √† l‚Äôaide d‚Äôun projet RStudio.\nUn projet RStudio permet de :\n\nregrouper les programmes et autres types de documents d‚Äôun m√™me projet ensemble ;\nfaciliter le suivi des modifcations, notamment avec git ;\nfavoriser la reproductibilit√© et la transmission des r√©glages li√©s √† un projet statistique.\n\nEn pratique, c‚Äôest un fichier .Rproj dans un dossier qui contient les programmes et les documents d‚Äôun m√™me projet statistique.",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#travailler-avec-les-projets-r-studio-pourquoi",
    "href": "slides.html#travailler-avec-les-projets-r-studio-pourquoi",
    "title": "Prise en main des donn√©es avec R",
    "section": "Travailler avec les projets R Studio : pourquoi ?",
    "text": "Travailler avec les projets R Studio : pourquoi ?\nIl est recommand√© de travailler syst√©matiquement avec les projets RStudio. Un projet RStudio :\n\ncentralise les √©l√©ments d‚Äôun projet statistique et permet d‚Äôy avoir acc√®s plus facilement avec les chemins relatifs : dans un programme, pour faire r√©f√©rence √† un document du projet RStudio, il suffit de renseigner son nom car le r√©pertoire de travail par d√©faut d‚Äôun projet est le dossier o√π se situe le fichier .Rproj.\nam√©liore le travail collaboratif : le principe des chemins relatifs rend le projet statistique ind√©pendant de l‚Äôarborescence de la machine sur laquelle il est h√©berg√©, et permet de d√©placer les fichiers plus facilement.\nfavorise la reproductibilit√© du projet statistique (ou de d√©veloppement, d‚Äôun package par exemple). Il facilite √©galement le travail avec Git. Il est facile de relier un projet RStudio √† git pour travailler collaborativement.",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#cr√©er-un-projet",
    "href": "slides.html#cr√©er-un-projet",
    "title": "Prise en main des donn√©es avec R",
    "section": "Cr√©er un projet",
    "text": "Cr√©er un projet\n\n\nPour cr√©er un projet sur RStudio :\n\nFile &gt; New project\nIl est possible de le cr√©er dans un nouveau dossier vide New directory ou dans un dossier existant Existing directory.\nIl est √©galement possible de le relier directement √† git Version Control.",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#ouvrir-un-projet-source-utilitr",
    "href": "slides.html#ouvrir-un-projet-source-utilitr",
    "title": "Prise en main des donn√©es avec R",
    "section": "Ouvrir un projet (source : UtilitR)",
    "text": "Ouvrir un projet (source : UtilitR)\n\nLorsqu‚Äôon ouvre un projet RStudio :\n\nune nouvelle session R s‚Äôouvre ;\nles sauvegardes de l‚Äôenvironnement sont ouvertes √† partir du fichier .RData si l‚Äôenregistrement a √©t√© activ√© (d√©conseill√©) ;\nla working directory est automatiquement d√©finie dans le dossier o√π se trouve le fichier .Rproj ;\nles documents ouverts au moment o√π le projet a √©t√© ferm√© pour la derni√®re fois sont restaur√©s, m√™me s‚Äôils n‚Äôavaient pas √©t√© sauv√©s.",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#fermer-un-projet-voir-utilitr",
    "href": "slides.html#fermer-un-projet-voir-utilitr",
    "title": "Prise en main des donn√©es avec R",
    "section": "Fermer un projet (voir UtilitR)",
    "text": "Fermer un projet (voir UtilitR)\n\nD‚Äôapr√®s la documentation UtilitR sur les bonnes pratiques :\nIl est fortement conseill√© de d√©sactiver la sauvegarde du fichier .RData √† la fermeture du projet. Pour ce faire, il faut aller dans Tools &gt; Global Options et rester dans l‚Äôonglet General. Chercher Save workspace to .RData on exit:, et choisir l‚Äôoption Never.\n::: {.callout-tip title=‚ÄúBonne pratique‚Äù} Sauvegarder et recharger les donn√©es du projet avec le fichier .RData est une tr√®s mauvaise pratique en termes de reproductibilit√©. En effet, il se peut que les donn√©es sauvegard√©es dans le .RData aient subi des modifications non document√©es (par exemple via la console), ou que les instructions pr√©sentes dans les scripts du projet n‚Äôaient pas √©t√© ex√©cut√©es dans l‚Äôordre. Dans ce cas, les donn√©es contenues dans le .RData peuvent ne pas √™tre coh√©rentes avec le projet, et en les utilisant vous risquez de ne pas obtenir les r√©sultats que vous voulez. :::",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#fermer-un-projet-voir-utilitr-1",
    "href": "slides.html#fermer-un-projet-voir-utilitr-1",
    "title": "Prise en main des donn√©es avec R",
    "section": "Fermer un projet (voir UtilitR)",
    "text": "Fermer un projet (voir UtilitR)",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#r√©diger-un-programme-r-les-bonnes-pratiques",
    "href": "slides.html#r√©diger-un-programme-r-les-bonnes-pratiques",
    "title": "Prise en main des donn√©es avec R",
    "section": "R√©diger un programme R : les bonnes pratiques",
    "text": "R√©diger un programme R : les bonnes pratiques\n\nComme nous l‚Äôavons vu, la console ne permet pas de stocker un programme. Pour r√©diger un programme r√©plicable, il faut cr√©er un script R (fichier .R).\nCette formation vise √† vous proposer quelques bonnes pratiques qui permettent la transmission des programmes R, notamment ceux des cha√Ænes de production.\nCes bonnes pratiques sont inspir√©es de Chapitre 5 Boite √† outils | Guide des bonnes pratiques en R √† l‚Äôusage des statisticiens publics (utilitr.org).",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#r√©diger-un-programme-r-les-bonnes-pratiques-1",
    "href": "slides.html#r√©diger-un-programme-r-les-bonnes-pratiques-1",
    "title": "Prise en main des donn√©es avec R",
    "section": "R√©diger un programme R : les bonnes pratiques",
    "text": "R√©diger un programme R : les bonnes pratiques\n\nNomEspace et indentationCommentaire\n\n\n\nLe nom des scripts R (fichiers .R) peut √™tre pr√©fix√© par sa position dans la cha√Æne de production.\nLe nom des scripts R peut √™tre suffix√© par le mill√©sime de la production, en cas de changement par rapport √† la derni√®re production et surtout en l‚Äôabsence de versionage (git).\nIl est pr√©f√©rable que le nom des objets (script, variable dans le programme, tableau de donn√©es‚Ä¶) ne contiennent pas de caract√®res sp√©ciaux, d‚Äôaccent et que les mots soient s√©par√©s par des underscores.\nPour le nom des variables et tables manipul√©es dans le code, il est recommand√© d‚Äôutiliser des substantifs informatifs.\nDans l‚Äôappel d‚Äôune fonction, il est recommand√© de nommer les arguments sp√©cifi√©s explicitement, pour favoriser la r√©plicabilit√© et la compr√©hension pour le lecteur.\n\n\n\n\nIl est recommand√© de retourner r√©guli√®rement √† la ligne pour rendre le code plus lisible.\nL‚Äôindentation n‚Äôest pas automatique en R (contrairement √† Python), il est recommand√© d‚Äôindenter le code pour am√©liorer sa lisibilit√©. Le raccourci CTRL + I permet de r√©indenter une s√©lection de lignes.\nIl est recommand√© d‚Äôins√©rer des espaces entre les op√©rateurs : assignation &lt;- ; comparaison &lt; &gt; &lt;= &gt;= == != ; op√©rations + - =.\nPas d‚Äôespace avant ou apr√®s les parenth√®ses et crochets.\n\n\n\n\nIl est recommand√© de commenter le code. Un commentaire d√©bute par # et se termine √† la fin de la ligne, contrairement √† SAS o√π il est possible d‚Äôencadrer du texte pour le commenter enti√®rement.\nLe commentaire doit √™tre clair et relativement court : il est pr√©f√©rable de bien nommer les objets de mani√®re informative, ainsi que les arguments des fonctions.\nLe script peut comporter des parties d√©limit√©es par des titres en commentaires.",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#importer-des-donn√©es",
    "href": "slides.html#importer-des-donn√©es",
    "title": "Prise en main des donn√©es avec R",
    "section": "Importer des donn√©es",
    "text": "Importer des donn√©es\n\nImporter un fichier csvImporter un fichier ExcelImporter un fichier Sas\n\n\n\nEEC_2019 &lt;- read.csv2(\"FD_EEC_2019.csv\", \n               header = TRUE, \n               sep = \";\", \n               quote = \"\\\"\", \n               dec = \".\", \n               fill = TRUE, \n               comment.char = \"\")\n\n\nhead(EEC_2019, 5)\n\n  ANNEE TRIM CATAU2010R METRODOM TYPMEN7 AGE3 AGE5 COURED ENFRED NFRRED SEXE\n1  2019    1          1        1       1   50   60      2      2      1    2\n2  2019    2          1        1       3   50   60      1      2      1    1\n3  2019    2          1        1       3   50   60      1      2      1    2\n4  2019    3          1        1       3   50   60      1      2      1    1\n5  2019    3          1        1       3   50   60      1      2      1    2\n  ACTEU ACTEU6 ACTIF ACTOP AIDFAM ANCCHOM ANCINACT CONTACT CREACCP DEM DISPOC\n1     3      6     2     2     NA      NA       NA      NA      NA   0     NA\n2     1      1     1     1     NA      NA       NA      NA      NA   0     NA\n3     3      6     2     2      2      NA        8      NA      NA   0     NA\n4     1      1     1     1     NA      NA       NA      NA      NA   0     NA\n5     3      6     2     2      2      NA        8      NA      NA   0     NA\n  GARDEB HALOR INSCONT MRA MRB MRBBIS MRC MRD MRDBIS MRE MREC MRF MRG MRGBIS\n1     NA     2      NA  NA  NA     NA  NA  NA     NA  NA   NA  NA  NA     NA\n2     NA     2      NA  NA  NA     NA  NA  NA     NA  NA   NA  NA  NA     NA\n3     NA     2      NA  NA  NA     NA  NA  NA     NA  NA    2  NA  NA     NA\n4     NA     2      NA  NA  NA     NA  NA  NA     NA  NA   NA  NA  NA     NA\n5     NA     2      NA  NA  NA     NA  NA  NA     NA  NA    2  NA  NA     NA\n  MRH MRI MRJ MRK MRL MRM MRN MRO MRPASSA MRPASSB MRPASSC MRS NONDIC NREC NRECA\n1  NA  NA  NA  NA  NA  NA  NA  NA      NA      NA      NA  NA     NA   NA    NA\n2  NA  NA  NA  NA  NA  NA  NA  NA      NA      NA      NA  NA     NA   NA    NA\n3  NA  NA  NA  NA  NA  NA  NA  NA      NA      NA      NA  NA     NA   NA    NA\n4  NA  NA  NA  NA  NA  NA  NA  NA      NA      NA      NA  NA     NA   NA    NA\n5  NA  NA  NA  NA  NA  NA  NA  NA      NA      NA      NA  NA     NA   NA    NA\n  NRECB OCCREF OFFICC OFFRE PASTRA PASTRB PASTRF PERCREV RABS RAISNREC RAISNSOU\n1    NA      1     NA    NA     NA     NA     NA      NA   NA       NA       NA\n2    NA      2     NA    NA     NA     NA     NA      NA   NA       NA       NA\n3    NA      1     NA    NA      2      2      2      NA   NA       NA        5\n4    NA      2     NA    NA      1     NA      1       1    8       NA       NA\n5    NA      1     NA    NA      2      2      2      NA   NA       NA        5\n  RAISPAS SOU SOUA SOUB SOUC SOUSEMPL STCHE TEMP TRAREF TYPCONT TYPCONTB CHPUB\n1      NA  NA   NA   NA   NA       NA    NA    2     NA      NA       NA    NA\n2      NA   2    2    2   NA       NA    NA   NA      1      NA       NA     1\n3      NA   2   NA   NA    2       NA    NA   NA      2      NA       NA    NA\n4      NA   2    2    2   NA        3    NA   NA      2      NA       NA     1\n5      NA   2   NA   NA    2       NA    NA   NA      2      NA       NA    NA\n  CSE CSER CSP CSTOT CSTOTR FONCTC NAFG004UN NAFG010UN NAFG017UN NAFG021UN\n1  NA   NA  NA    86      8     NA                                        \n2  64    6  64    64      6     NA        EU        FZ        FZ         F\n3  NA   NA  NA    77      7     NA                                        \n4  64    6  64    64      6     NA        EU        FZ        FZ         F\n5  NA   NA  NA    77      7     NA                                        \n  NAFG038UN NAFG088UN PUB3FP QPRC STC RDET STAT2 STATOEP STATUT STATUTR TITC\n1                  NA     NA   NA  NA   NA    NA      NA     NA      NA   NA\n2        FZ        43      4    9   3   NA     2      35     35       5   NA\n3                  NA     NA   NA  NA   NA    NA      NA     NA      NA   NA\n4        FZ        43      4    9   3   NA     2      35     35       5   NA\n5                  NA     NA   NA  NA   NA    NA      NA     NA      NA   NA\n  CSTMN CSTPLC DISPPLC DUHAB GARDEA HHC6 HORAIC RAISON RAISTP STMN STPLC TPPRED\n1    NA     NA      NA    NA     NA   NA     NA     NA     NA   NA    NA     NA\n2    NA     NA      NA     1     NA    1      3     NA      5    2     2      2\n3    NA     NA      NA    NA     NA   NA     NA     NA     NA   NA    NA     NA\n4    NA     NA      NA     1     NA    1      3     NA      5    2     2      2\n5    NA     NA      NA    NA     NA   NA     NA     NA     NA   NA    NA     NA\n  TXTPPRED ANCENTR4 SITANT AAC CSA NAFANT NAFANTG004N DIP11 CSTOTPRM IDENTM\n1       NA       NA     NA   2   0      0          00    70       86      1\n2        1        4      5  NA  NA     NA                50       64      2\n3       NA       NA     NA   1  54     43          EU    70       64      2\n4        1        4      5  NA  NA     NA                50       64      3\n5       NA       NA     NA   1  54     43          EU    70       64      3\n    EXTRIAN EMPNBH HREC HHCE HPLUSA JOURTR NBTOTE\n1 107.74972     NA   NA   NA     NA     NA     NA\n2  46.17385      1   NA    1     NA      1     NA\n3  46.17385     NA   NA   NA     NA     NA     NA\n4  44.32930      0   NA    1     NA      1     NA\n5  44.32930     NA   NA   NA     NA     NA     NA\n\n\n\n\n\nlibrary(\"openxlsx\")\n\nEEC_excel &lt;- read.xlsx(\"FD_EEC_2019.xlsx\")\n\n\nhead(EEC_excel, 5)\n\n  ANNEE TRIM CATAU2010R METRODOM TYPMEN7 AGE3 AGE5 COURED ENFRED NFRRED SEXE\n1  2019    1          1        1       1   50   60      2      2      1    2\n2  2019    2          1        1       3   50   60      1      2      1    1\n3  2019    2          1        1       3   50   60      1      2      1    2\n4  2019    3          1        1       3   50   60      1      2      1    1\n5  2019    3          1        1       3   50   60      1      2      1    2\n  ACTEU ACTEU6 ACTIF ACTOP AIDFAM ANCCHOM ANCINACT CONTACT CREACCP DEM DISPOC\n1     3      6     2     2     NA      NA       NA      NA      NA   0     NA\n2     1      1     1     1     NA      NA       NA      NA      NA   0     NA\n3     3      6     2     2      2      NA        8      NA      NA   0     NA\n4     1      1     1     1     NA      NA       NA      NA      NA   0     NA\n5     3      6     2     2      2      NA        8      NA      NA   0     NA\n  GARDEB HALOR INSCONT MRA MRB MRBBIS MRC MRD MRDBIS MRE MREC MRF MRG MRGBIS\n1     NA     2      NA  NA  NA     NA  NA  NA     NA  NA   NA  NA  NA     NA\n2     NA     2      NA  NA  NA     NA  NA  NA     NA  NA   NA  NA  NA     NA\n3     NA     2      NA  NA  NA     NA  NA  NA     NA  NA    2  NA  NA     NA\n4     NA     2      NA  NA  NA     NA  NA  NA     NA  NA   NA  NA  NA     NA\n5     NA     2      NA  NA  NA     NA  NA  NA     NA  NA    2  NA  NA     NA\n  MRH MRI MRJ MRK MRL MRM MRN MRO MRPASSA MRPASSB MRPASSC MRS NONDIC NREC NRECA\n1  NA  NA  NA  NA  NA  NA  NA  NA      NA      NA      NA  NA     NA   NA    NA\n2  NA  NA  NA  NA  NA  NA  NA  NA      NA      NA      NA  NA     NA   NA    NA\n3  NA  NA  NA  NA  NA  NA  NA  NA      NA      NA      NA  NA     NA   NA    NA\n4  NA  NA  NA  NA  NA  NA  NA  NA      NA      NA      NA  NA     NA   NA    NA\n5  NA  NA  NA  NA  NA  NA  NA  NA      NA      NA      NA  NA     NA   NA    NA\n  NRECB OCCREF OFFICC OFFRE PASTRA PASTRB PASTRF PERCREV RABS RAISNREC RAISNSOU\n1    NA      1     NA    NA     NA     NA     NA      NA   NA       NA       NA\n2    NA      2     NA    NA     NA     NA     NA      NA   NA       NA       NA\n3    NA      1     NA    NA      2      2      2      NA   NA       NA        5\n4    NA      2     NA    NA      1     NA      1       1    8       NA       NA\n5    NA      1     NA    NA      2      2      2      NA   NA       NA        5\n  RAISPAS SOU SOUA SOUB SOUC SOUSEMPL STCHE TEMP TRAREF TYPCONT TYPCONTB CHPUB\n1      NA  NA   NA   NA   NA       NA    NA    2     NA      NA       NA    NA\n2      NA   2    2    2   NA       NA    NA   NA      1      NA       NA     1\n3      NA   2   NA   NA    2       NA    NA   NA      2      NA       NA    NA\n4      NA   2    2    2   NA        3    NA   NA      2      NA       NA     1\n5      NA   2   NA   NA    2       NA    NA   NA      2      NA       NA    NA\n  CSE CSER CSP CSTOT CSTOTR FONCTC NAFG004UN NAFG010UN NAFG017UN NAFG021UN\n1  NA   NA  NA    86      8     NA      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;\n2  64    6  64    64      6     NA        EU        FZ        FZ         F\n3  NA   NA  NA    77      7     NA      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;\n4  64    6  64    64      6     NA        EU        FZ        FZ         F\n5  NA   NA  NA    77      7     NA      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;\n  NAFG038UN NAFG088UN PUB3FP QPRC STC RDET STAT2 STATOEP STATUT STATUTR TITC\n1      &lt;NA&gt;        NA     NA   NA  NA   NA    NA      NA     NA      NA   NA\n2        FZ        43      4    9   3   NA     2      35     35       5   NA\n3      &lt;NA&gt;        NA     NA   NA  NA   NA    NA      NA     NA      NA   NA\n4        FZ        43      4    9   3   NA     2      35     35       5   NA\n5      &lt;NA&gt;        NA     NA   NA  NA   NA    NA      NA     NA      NA   NA\n  CSTMN CSTPLC DISPPLC DUHAB GARDEA HHC6 HORAIC RAISON RAISTP STMN STPLC TPPRED\n1    NA     NA      NA    NA     NA   NA     NA     NA     NA   NA    NA     NA\n2    NA     NA      NA     1     NA    1      3     NA      5    2     2      2\n3    NA     NA      NA    NA     NA   NA     NA     NA     NA   NA    NA     NA\n4    NA     NA      NA     1     NA    1      3     NA      5    2     2      2\n5    NA     NA      NA    NA     NA   NA     NA     NA     NA   NA    NA     NA\n  TXTPPRED ANCENTR4 SITANT AAC CSA NAFANT NAFANTG004N DIP11 CSTOTPRM IDENTM\n1       NA       NA     NA   2   0      0           0    70       86      1\n2        1        4      5  NA  NA     NA        &lt;NA&gt;    50       64      2\n3       NA       NA     NA   1  54     43          EU    70       64      2\n4        1        4      5  NA  NA     NA        &lt;NA&gt;    50       64      3\n5       NA       NA     NA   1  54     43          EU    70       64      3\n       EXTRIAN EMPNBH HREC HHCE HPLUSA JOURTR NBTOTE\n1  107.7497222   &lt;NA&gt;   NA &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;\n2 46.173848259      1   NA    1   &lt;NA&gt;      1   &lt;NA&gt;\n3 46.173848259   &lt;NA&gt;   NA &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;\n4 44.329297911      0   NA    1   &lt;NA&gt;      1   &lt;NA&gt;\n5 44.329297911   &lt;NA&gt;   NA &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;\n\n\n\n\n\nlibrary(\"haven\")\n\nEEC_2019_SAS &lt;- read_sas(\"FD_EEC_2019.sas7bdat\")",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#r-une-logique-vectorielle",
    "href": "slides.html#r-une-logique-vectorielle",
    "title": "Prise en main des donn√©es avec R",
    "section": "R : une logique vectorielle",
    "text": "R : une logique vectorielle\n\nL‚Äô√©l√©ment de base de R est le vecteur c() :\n\nun_vecteur_numerique &lt;- c(2, 6, 8, 1)\n\nR utilise la logique de la vectorisation : les fonctions sont appliqu√©es √† l‚Äôensemble d‚Äôun vecteur (ou matrice) plut√¥t que d‚Äô√™tre appliqu√©es successivement √† chacun des √©l√©ments de ce vecteur (ou de cette matrice). Cela permet une acc√©l√©ration du temps de calcul.\nPar exemple, pour obtenir le carr√© de chacun des √©l√©ments d‚Äôun vecteur :\n\nSans vectorisationAvec vectorisation\n\n\n\nx &lt;- 1:10\nfor (k in seq_along(x)) {\nx[k] &lt;- x[k]**2\n}\n\n\n\nApplication de la fonction carr√©e au vecteur :\n\nx &lt;- 1:10\nx &lt;- x**2",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#les-objets-√©l√©mentaires-et-leurs-types",
    "href": "slides.html#les-objets-√©l√©mentaires-et-leurs-types",
    "title": "Prise en main des donn√©es avec R",
    "section": "Les objets √©l√©mentaires et leurs types",
    "text": "Les objets √©l√©mentaires et leurs types\n\nNum√©riqueLes cha√Ænes de caract√®reLes bool√©ens\n\n\nIl existe deux types num√©riques en R :\n\nles entiers ;\nles flottants.\n\n\nnum &lt;- 5\nclass(num)\n\n[1] \"numeric\"\n\n\n\n\nnum &lt;- integer(5)\nclass(num)\n\n[1] \"integer\"\n\n\n\n\nUne cha√Æne de caract√®re est d√©limit√©e par des quotes ou des doubles quotes. Il est recommand√© d‚Äôutiliser les doubles quotes syst√©matiquement.\nLe nombre de caract√®res d‚Äôune cha√Æne de caract√®res est donn√© par la fonction nchar().\nLa fonction paste0() permet de concat√©ner des cha√Ænes de caract√®res.\nüîçRemarque : l‚Äôanti slash en R permet de g√©rer les caract√®res sp√©ciaux, dans les chemins d‚Äôacc√®s aux donn√©es, il faut donc soit les remplacer par des slashs, soit les doubler.üîç\n\n#Cr√©ation d'une cha√Æne de caract√®res\nchaine &lt;- \"Oui\"\n\n#Type de la variable chaine\nclass(chaine)\n\n[1] \"character\"\n\n\n\n\n#Nombre de caract√®res de la variable\nnchar(chaine)\n\n[1] 3\n\n\n\n\n#Concat√©nation de plusieurs cha√Ænes de caract√®re\nprint(paste0(\"Les \", \"cha√Ænes \", \"de caract√®re \", \"peuvent √™tre concat√©n√©es.\"))\n\n[1] \"Les cha√Ænes de caract√®re peuvent √™tre concat√©n√©es.\"\n\n\n\nüîçPour aller plus loin üîç le package stringr permet de traiter les cha√Ænes de caract√®re : mettre en majuscules, mettre en minuscules, extraire une sous-cha√Æne‚Ä¶\n\n\nUn bool√©en peut valoir TRUE ou FALSE : c‚Äôest une variable qui indique si une condition logique est v√©rifi√©e.\n\n\n# Test de l'√©galit√©\nprint(1 == 2)\n\n\n\n\n\n[1] FALSE\n\n\n\n\n\n\na &lt;- (\"Dares\" == \"Dares\")\nprint(a)\n\n\n\n\n\n[1] TRUE\n\n\n\n\n\n\n# Comparaison num√©rique\nprint(2 &lt; 3)\n\n\n\n\n\n[1] TRUE\n\n\n\n\n\n\nprint(4 &gt;= 5)\n\n\n\n\n\n[1] FALSE\n\n\n\n\n\n\nb &lt;- 3 &lt;= 2\nprint(b)\n\n\n\n\n\n[1] FALSE\n\n\n\n\n\n\n# Test de la diff√©rence\nprint(\"A\" != \"a\")\n\n\n\n\n\n[1] TRUE\n\n\n\n‚ùó Attention : R est sensible √† la casse ‚ùó",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#les-structures-de-donn√©es-de-base-en-r",
    "href": "slides.html#les-structures-de-donn√©es-de-base-en-r",
    "title": "Prise en main des donn√©es avec R",
    "section": "Les structures de donn√©es de base en R",
    "text": "Les structures de donn√©es de base en R\n\nVecteursListes\n\n\n\nUn vecteur est une s√©quence ordonn√©e d‚Äôobjets √©l√©mentaires de m√™me type. Les vecteurs ont un type (correspondant √† celui des objets qu‚Äôil contient) donn√© par la fonction class() et une longueur donn√©e par la fonction length.\n\nvecteur_num &lt;- c(3, 18, 9)\nlength(vecteur_num)\n\n[1] 3\n\n\n\n\nclass(vecteur_num)\n\n[1] \"numeric\"\n\n\n\n\n\nUne liste est une s√©quence ordonn√©e, √©ventuellement h√©t√©rog√®ne, d‚Äôobjets de types quelconques.\nUne liste est toujours de type list, peu importe ce qui la compose.\n\nliste_divers &lt;- list(\"A\", 7, TRUE)\nlength(liste_divers)\n\n[1] 3\n\n\n\n\nclass(liste_divers)\n\n[1] \"list\"\n\n\n\n\n#Acc√©der aux √©l√©ments d'une liste\nprint(liste_divers[[1]])\n\n[1] \"A\"",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#data-frames",
    "href": "slides.html#data-frames",
    "title": "Prise en main des donn√©es avec R",
    "section": "Data frames",
    "text": "Data frames\n\nLe data.frame est un tableau sous forme d‚Äôune liste (classe list) de vecteurs qui repr√©sentent les colonnes. Les vecteurs doivent √™tre de la m√™me longueur, la longueur de chaque vecteur correspond au nombre de lignes/d‚Äôobservations du tableau.\nPuisque chaque colonne est un vecteur :\n\nune colonne repr√©sente une variable d‚Äôun type unique ;\nune colonne a un nom, celui de la variable ;\nchaque colonne doit avoir la m√™me hauteur.\n\nLes dimensions du data.frame sont donn√©es par la fonction dim().\n\n#Obtenir les dimensions du tableau de l'enqu√™te emploi en continu\ndim(EEC_2019)\n\n[1] 416298    124",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#op√©rations-de-base-sur-les-data.frames-r-base-ou-dplyr",
    "href": "slides.html#op√©rations-de-base-sur-les-data.frames-r-base-ou-dplyr",
    "title": "Prise en main des donn√©es avec R",
    "section": "Op√©rations de base sur les data.frames : R base ou dplyr ?",
    "text": "Op√©rations de base sur les data.frames : R base ou dplyr ?\n\nüëâ But : si vous rencontrez des syntaxes Rbase, les comprendre. Nous recommandons pour d√©buter d‚Äôutiliser plut√¥t les syntaxes dplyr pr√©sent√©es plus loin.\n‚ùì Pourquoi ‚ùì\nLa syntaxe de dplyr est √† notre avis plus lisible et intuitive pour s‚Äôinitier √† R, et aussi largement utilis√©e par la communaut√© des utilisateurs de R, ce qui facilite le partage de solutions.\n\n\n\n\n\n\nNote\n\n\nIl n‚Äôexiste pas une mani√®re unique de programmer en R, et l‚Äôutilisation de Rbase pr√©sente aussi des avantages : la stabilit√© par exemple, la meilleure reproductibilit√© car n√©cessite moins de packages et de d√©pendances‚Ä¶ Cette formation propose une mani√®re de programme utilisant plut√¥t le tidyverse",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#op√©rations-de-base-sur-les-data.frames-r-base",
    "href": "slides.html#op√©rations-de-base-sur-les-data.frames-r-base",
    "title": "Prise en main des donn√©es avec R",
    "section": "Op√©rations de base sur les data.frames : R base",
    "text": "Op√©rations de base sur les data.frames : R base\n\nS√©lectionner des lignesS√©lectionner des colonnes\n\n\n\nObtenir le nom des lignes :\n\n\nrownames(EEC_ex)\n\n [1] \"1\"  \"2\"  \"3\"  \"4\"  \"5\"  \"6\"  \"7\"  \"8\"  \"9\"  \"10\" \"11\" \"12\" \"13\" \"14\" \"15\"\n[16] \"16\" \"17\" \"18\" \"19\" \"20\" \"21\" \"22\" \"23\" \"24\" \"25\" \"26\" \"27\" \"28\" \"29\" \"30\"\n\n\n\n\nS√©lectionner la 5√®me ligne :\n\n\nEEC_ex[5,]\n\n   SEXE ACTIF COURED AGE5 CSTOTR NAFG004UN AGE3 ANNEE JOURTR\n5 Femme     2      1   60      7      &lt;NA&gt;   50  2019     NA\n\n\n\n\nS√©lectionner les lignes 10 et 35 :\n\n\nEEC_ex[c(10,35),]\n\n    SEXE ACTIF COURED AGE5 CSTOTR NAFG004UN AGE3 ANNEE JOURTR\n10 Homme     1      2   15      4        EV   15  2019      5\nNA  &lt;NA&gt;    NA     NA   NA     NA      &lt;NA&gt;   NA    NA     NA\n\n\n\n\nS√©lectionner les lignes 3 √† 8 :\n\n\nEEC_ex[c(3:8),]\n\n   SEXE ACTIF COURED AGE5 CSTOTR NAFG004UN AGE3 ANNEE JOURTR\n3 Femme     2      1   60      7      &lt;NA&gt;   50  2019     NA\n4 Homme     1      1   60      6        EU   50  2019      1\n5 Femme     2      1   60      7      &lt;NA&gt;   50  2019     NA\n6 Homme     1      1   60      6        EU   50  2019      1\n7 Femme     2      1   60      7      &lt;NA&gt;   50  2019     NA\n8 Homme     1      1   40      4        ET   30  2019      5\n\n\n\n\n\nConna√Ætre le nom des colonnes/variables :\n\n\nnames(EEC_ex)\n\n[1] \"SEXE\"      \"ACTIF\"     \"COURED\"    \"AGE5\"      \"CSTOTR\"    \"NAFG004UN\"\n[7] \"AGE3\"      \"ANNEE\"     \"JOURTR\"   \n\n\n\n\nS√©lectionner une colonne solution 1 : la 3√®me colonne :\n\n\nEEC_ex[, 3]\n\n [1] 2 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1 1\n\n\n\n\nS√©lectionner une colonne solution 2, la variable ACTIF :\n\n\nEEC_ex[\"ACTIF\"]\n\n   ACTIF\n1      2\n2      1\n3      2\n4      1\n5      2\n6      1\n7      2\n8      1\n9      1\n10     1\n11     1\n12     1\n13     1\n14     1\n15     1\n16     2\n17     2\n18     2\n19     2\n20     2\n21     2\n22     2\n23     1\n24     2\n25     1\n26     2\n27     2\n28     2\n29     2\n30     2\n\n\n\n\nS√©lectionner une colonne solution 3, la variable ACTIF\n\n\nEEC_ex$ACTIF\n\n [1] 2 1 2 1 2 1 2 1 1 1 1 1 1 1 1 2 2 2 2 2 2 2 1 2 1 2 2 2 2 2\n\n\n\n\nConna√Ætre le type des variables :\n\n\nclass(EEC_ex$AGE3)\n\n[1] \"integer\"\n\n\n\n\nS√©lectionner la 3√®me ligne et les colonnes SEXE et ACTIF :\n\n\nEEC_ex[3, c(\"SEXE\", \"ACTIF\")]\n\n   SEXE ACTIF\n3 Femme     2",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#op√©rations-de-base-sur-les-data.frames-convertir-des-colonnes",
    "href": "slides.html#op√©rations-de-base-sur-les-data.frames-convertir-des-colonnes",
    "title": "Prise en main des donn√©es avec R",
    "section": "Op√©rations de base sur les data.frames : convertir des colonnes",
    "text": "Op√©rations de base sur les data.frames : convertir des colonnes\n\nConvertir une variable num√©rique en caract√®re :\n\nclass(EEC_ex$ANNEE)\n\n[1] \"integer\"\n\nEEC_ex$ANNEE &lt;- as.character(EEC_ex$ANNEE)\nclass(EEC_ex$ANNEE)\n\n[1] \"character\"\n\n\n\nConvertir une colonne caract√®re en num√©rique :\n\nEEC_ex$ANNEE &lt;- as.numeric(EEC_ex$ANNEE)\nclass(EEC_ex$ANNEE)\n\n[1] \"numeric\"",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#les-facteurs-un-outil-pour-les-variables-qualitatives",
    "href": "slides.html#les-facteurs-un-outil-pour-les-variables-qualitatives",
    "title": "Prise en main des donn√©es avec R",
    "section": "Les facteurs : un outil pour les variables qualitatives",
    "text": "Les facteurs : un outil pour les variables qualitatives\nLe type factor en R permet de manipuler des variables qualitatives.\nLe package forcats permet de traiter les facteurs : recoder les modalit√©s, les ordonner‚Ä¶\n\nConvertirModalit√©sRecoder\n\n\n\nclass(EEC_2019$SEXE)\n\n[1] \"integer\"\n\n#Conversion de la variable SEXE de num√©rique en facteur\nEEC_2019$SEXE &lt;- as.factor(EEC_2019$SEXE)\n\nclass(EEC_2019$SEXE)\n\n[1] \"factor\"\n\n\n\n\nLa fonction levels() permet de conna√Ætre l‚Äôensemble des modalit√©s existantes d‚Äôun facteur (m√™me si elles ne sont plus pr√©sentes dans les donn√©es apr√®s s√©lection des lignes).\n\nlevels(EEC_2019$SEXE)\n\n[1] \"1\" \"2\"\n\n\n\n\nLa fonction fct_recode() permet de renommer les modalit√©s d‚Äôun facteur, avec la syntaxe suivante :\n\nnouvelle_variable &lt;- fct_recode(ancienne_variable,\n                                \"Nouvelle_valeur1\" = \"Ancienne_valeur1\",\n                                \"Nouvelle_valeur2\" = \"Ancienne_valeur2\",\n                                NULL = \"Modalite_a_supprimer\")\n\nExemple : Recodage des modalit√©s de la variable SEXE.\n\nlibrary(forcats)\n\nEEC_2019$SEXE &lt;- fct_recode(EEC_2019$SEXE,\n                            \"Homme\" = \"1\",\n                            \"Femme\" = \"2\")\n\nlevels(EEC_2019$SEXE)\n\n[1] \"Homme\" \"Femme\"",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#op√©rations-de-base-sur-les-data.frames-les-valeurs-manquantes",
    "href": "slides.html#op√©rations-de-base-sur-les-data.frames-les-valeurs-manquantes",
    "title": "Prise en main des donn√©es avec R",
    "section": "Op√©rations de base sur les data.frames : les valeurs manquantes",
    "text": "Op√©rations de base sur les data.frames : les valeurs manquantes\nLorsqu‚Äôune valeur est manquante dans une enqu√™te par exemple, elle figure sous forme de la modalit√© NA, ‚ÄúNot Available‚Äù, qui existe pour tous les types de variables.\nSelon la mani√®re dont ces valeurs manquantes existent dans les donn√©es √† importer dans R, elles ne sont pas forc√©ment d√©tect√©es comme telles. Par exemple :\n\ntest_na &lt;- as.data.frame(\n  list(\n  c(1, \".\", 3),\n  c(\"A\", \"E\", \".\")\n  )\n  )\n\nnames(test_na) &lt;- c(\"Var1\", \"Var2\")\n\nprint(test_na)\n\n  Var1 Var2\n1    1    A\n2    .    E\n3    3    .\n\n\nIl faut les recoder en NA avec la fonction fct_recode() :\n\ntest_na$Var1 &lt;- as.factor(test_na$Var1)\n\ntest_na$Var1 &lt;- fct_recode(test_na$Var1,\n                           NULL = \".\")\n\nprint(test_na)\n\n  Var1 Var2\n1    1    A\n2 &lt;NA&gt;    E\n3    3    .",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#les-dates-sous-r",
    "href": "slides.html#les-dates-sous-r",
    "title": "Prise en main des donn√©es avec R",
    "section": "Les dates sous R",
    "text": "Les dates sous R\nLe format de date le plus courant en R est la classe Date. Elle correspond √† une distance par rapport √† une date origine, ce qui permet de faire des calculs (distance entre deux dates par exemple).\n\nCr√©er une dateComposantsIntervalle\n\n\nIl est possible de cr√©er une date √† partir d‚Äôune cha√Æne de carat√®re. Le format standard est ‚ÄúAAAA-MM-JJ‚Äù, mais il est possible de sp√©cifier un autre format.\n\ndate_1 &lt;- as.Date(\"2023-01-24\")\n\ndate_2 &lt;- as.Date(\"12/07/2022\", format = \"%d/%m/%Y\")\n\n\n\nLe package lubridate permet de traiter les dates. Il n‚Äôest pas pr√©senter davantage ici, voici simplement comment il est possible d‚Äôacc√©der aux composants d‚Äôune date avec lubridate :\n\nlibrary(lubridate)\n\nyear(date_1)\n\n[1] 2023\n\nmonth(date_1)\n\n[1] 1\n\nquarter(date_1)\n\n[1] 1\n\nday(date_1)\n\n[1] 24\n\n\n\n\nAvec le type Date, vient la notion d‚Äôintervalle temporel, qui est √©galement un type de donn√©es √† part enti√®re. La fonction interval() permet de calculer des dur√©es.\n\nlibrary(lubridate)\n\ndate_1 &lt;- as.Date(\"2023-01-24\")\n\ndate_2 &lt;- as.Date(\"12/07/2022\", format = \"%d/%m/%Y\")\n\nintervalle &lt;- interval(date_1, date_2)\nintervalle\n\n[1] 2023-01-24 UTC--2022-07-12 UTC\n\nclass(intervalle)\n\n[1] \"Interval\"\nattr(,\"package\")\n[1] \"lubridate\"",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#tidyverse-dplyr-et-le-pipe",
    "href": "slides.html#tidyverse-dplyr-et-le-pipe",
    "title": "Prise en main des donn√©es avec R",
    "section": "Tidyverse, dplyr et le pipe",
    "text": "Tidyverse, dplyr et le pipe\n\nLa majorit√© des utilisateurs de R utilisent un ensemble de package contenu dans le tidyverse , qui propose des fonctions alternatives √† Rbase. Nous vous recommandons d‚Äôutiliser le tidyverse, et en particulier le package dplyr, pour r√©diger vos programmes.\nAvantages du tidyverse et de dplyr :\n\nplus lisible, plus proche d‚Äôun langage interpr√©t√© que R base ;\nutilis√© par la majorit√© des utilisateurs de R ;\nstable.",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#le-pipe",
    "href": "slides.html#le-pipe",
    "title": "Prise en main des donn√©es avec R",
    "section": "Le pipe",
    "text": "Le pipe\n\nPour encha√Æner diff√©rentes instructions sur un data.frame, on utilise le ‚Äúpipe‚Äù : %&gt;%, un op√©rateur qui permet de prendre ce qu‚Äôil y a √† gauche du pipe pour l‚Äôinjecter en entr√©e (argument) dans la fonction √† droite du pipe.\nAttention : il est recommand√© de d√©finir un nouveau tableau pour enregistrer les op√©rations sur un data.frame.\nLes bonnes pratiques de r√©daction d‚Äôun code sont renseign√©es dans UtilitR - Les bonnes pratiques",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#s√©lectionner-des-colonnes-1",
    "href": "slides.html#s√©lectionner-des-colonnes-1",
    "title": "Prise en main des donn√©es avec R",
    "section": "S√©lectionner des colonnes",
    "text": "S√©lectionner des colonnes\n\nS√©lectionner des colonnes par leur nom avec select() :\n\n#Les colonnes ann√©e et Age3\nnouveau_df_1 &lt;- EEC_ex %&gt;%\n  select(ANNEE, AGE3)\n\nhead(nouveau_df_1, 5)\n\n  ANNEE AGE3\n1  2019   50\n2  2019   50\n3  2019   50\n4  2019   50\n5  2019   50\n\n\n\n\nSupprimer une colonne avec le - dans select() :\n\n#Toutes les colonnes sauf Age3\nnouveau_df_2 &lt;- EEC_ex %&gt;%\n  select(-AGE3)\n\nhead(nouveau_df_2, 5)\n\n   SEXE ACTIF COURED AGE5 CSTOTR NAFG004UN ANNEE JOURTR\n1 Femme     2      2   60      8      &lt;NA&gt;  2019     NA\n2 Homme     1      1   60      6        EU  2019      1\n3 Femme     2      1   60      7      &lt;NA&gt;  2019     NA\n4 Homme     1      1   60      6        EU  2019      1\n5 Femme     2      1   60      7      &lt;NA&gt;  2019     NA",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#afficher-les-premi√®res-lignes",
    "href": "slides.html#afficher-les-premi√®res-lignes",
    "title": "Prise en main des donn√©es avec R",
    "section": "Afficher les premi√®res lignes",
    "text": "Afficher les premi√®res lignes\n\nAvant de d√©buter une analyse, il est utile de visualiser les premi√®res lignes du tableau de donn√©es. C‚Äôest notamment tr√®s utile lorsque les donn√©es sont volumineuses et que l‚Äôaffichage du tableau complet prend du temps.\n\nEEC_debut &lt;- EEC_ex %&gt;%\n  head(5)\nEEC_debut\n\n   SEXE ACTIF COURED AGE5 CSTOTR NAFG004UN AGE3 ANNEE JOURTR\n1 Femme     2      2   60      8      &lt;NA&gt;   50  2019     NA\n2 Homme     1      1   60      6        EU   50  2019      1\n3 Femme     2      1   60      7      &lt;NA&gt;   50  2019     NA\n4 Homme     1      1   60      6        EU   50  2019      1\n5 Femme     2      1   60      7      &lt;NA&gt;   50  2019     NA",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#filtrer-des-lignes",
    "href": "slides.html#filtrer-des-lignes",
    "title": "Prise en main des donn√©es avec R",
    "section": "Filtrer des lignes",
    "text": "Filtrer des lignes\n\nPour filter des lignes selon une ou plusieurs conditions, on utilise la fonction filter() :\n\nEgalit√©In√©galit√©Diff√©rencePlusieurs conditions\n\n\n\nEEC_femme &lt;- EEC_ex %&gt;%\n  filter(SEXE == \"Femme\")\n\nhead(EEC_femme, 5)\n\n   SEXE ACTIF COURED AGE5 CSTOTR NAFG004UN AGE3 ANNEE JOURTR\n1 Femme     2      2   60      8      &lt;NA&gt;   50  2019     NA\n2 Femme     2      1   60      7      &lt;NA&gt;   50  2019     NA\n3 Femme     2      1   60      7      &lt;NA&gt;   50  2019     NA\n4 Femme     2      1   60      7      &lt;NA&gt;   50  2019     NA\n5 Femme     1      1   40      4        EV   30  2019      5\n\n\n\n\n\nEEC_moins_30 &lt;- EEC_ex %&gt;%\n  filter(AGE5 &lt;= 30)\n\nhead(EEC_moins_30, 5)\n\n   SEXE ACTIF COURED AGE5 CSTOTR NAFG004UN AGE3 ANNEE JOURTR\n1 Homme     1      2   15      4        EV   15  2019      5\n2 Femme     1      2   15      3        EV   15  2019      5\n3 Homme     1      2   15      4        EV   15  2019      5\n4 Femme     1      2   15      3        EV   15  2019      5\n5 Homme     1      2   15      4        EV   15  2019      5\n\n\n\n\n\nEEC_hors_cadres &lt;- EEC_ex %&gt;%\n  filter(CSTOTR != 3)\n\nhead(EEC_hors_cadres, 5)\n\n   SEXE ACTIF COURED AGE5 CSTOTR NAFG004UN AGE3 ANNEE JOURTR\n1 Femme     2      2   60      8      &lt;NA&gt;   50  2019     NA\n2 Homme     1      1   60      6        EU   50  2019      1\n3 Femme     2      1   60      7      &lt;NA&gt;   50  2019     NA\n4 Homme     1      1   60      6        EU   50  2019      1\n5 Femme     2      1   60      7      &lt;NA&gt;   50  2019     NA\n\n\n\n\n\n#Op√©rateur ET\nEEC_femme_moins_30 &lt;- EEC_ex %&gt;%\n  filter(SEXE == \"femme\" & AGE5 &lt;= 30)\n\nhead(EEC_femme_moins_30, 5)\n\n[1] SEXE      ACTIF     COURED    AGE5      CSTOTR    NAFG004UN AGE3     \n[8] ANNEE     JOURTR   \n&lt;0 rows&gt; (or 0-length row.names)\n\n#Op√©rateur OU\nEEC_femme_ou_cadre &lt;- EEC_ex %&gt;%\n  filter(SEXE == \"femme\" | CSTOTR == 3)\n\nhead(EEC_femme_ou_cadre, 5)\n\n   SEXE ACTIF COURED AGE5 CSTOTR NAFG004UN AGE3 ANNEE JOURTR\n1 Femme     1      2   15      3        EV   15  2019      5\n2 Femme     1      2   15      3        EV   15  2019      5\n3 Femme     1      2   15      3        EV   15  2019      5\n4 Homme     1      1   50      3        EV   50  2019      5\n5 Homme     1      1   50      3        EV   50  2019      5",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#filtrer-des-lignes-1",
    "href": "slides.html#filtrer-des-lignes-1",
    "title": "Prise en main des donn√©es avec R",
    "section": "Filtrer des lignes",
    "text": "Filtrer des lignes\n\n\nInclusion dans une listeValeurs manquantesValeurs distinctes\n\n\n\nEEC_hors_agr &lt;- EEC_ex %&gt;%\n  filter(NAFG004UN %in% c(\"ET\", \"EU\", \"EV\"))\n\nhead(EEC_hors_agr, 5)\n\n   SEXE ACTIF COURED AGE5 CSTOTR NAFG004UN AGE3 ANNEE JOURTR\n1 Homme     1      1   60      6        EU   50  2019      1\n2 Homme     1      1   60      6        EU   50  2019      1\n3 Homme     1      1   60      6        EU   50  2019      1\n4 Homme     1      1   40      4        ET   30  2019      5\n5 Femme     1      1   40      4        EV   30  2019      5\n\n\n\n\nPour tester si une valeur est manquante, il faut utiliser la fonction is.na(). Le test variable == NA renvoie une erreur.\nPour tester qu‚Äôune valeur est bien pr√©sente, c‚Äôest la condition !(is.na(variable)). la syntaxe !() signifie ‚Äúdiff√©rent de‚Äù, c‚Äôest-√†-dire teste la condition contraire √† ce qui est renseign√© dans les parenth√®ses.\nUniquement les lignes pour lesquelles NAFG004UN est manquante :\n\nEEC_CSP_na &lt;- EEC_ex %&gt;%\n  filter(is.na(NAFG004UN))\n\nhead(EEC_CSP_na, 5)\n\n   SEXE ACTIF COURED AGE5 CSTOTR NAFG004UN AGE3 ANNEE JOURTR\n1 Femme     2      2   60      8      &lt;NA&gt;   50  2019     NA\n2 Femme     2      1   60      7      &lt;NA&gt;   50  2019     NA\n3 Femme     2      1   60      7      &lt;NA&gt;   50  2019     NA\n4 Femme     2      1   60      7      &lt;NA&gt;   50  2019     NA\n5 Homme     2      2   60      7      &lt;NA&gt;   50  2019     NA\n\n\n\nUniquement les lignes pour lesquelles NAFG004UN est renseign√©e :\n\nEEC_CSP_hors_na &lt;- EEC_ex %&gt;%\n  filter(!(is.na(NAFG004UN)))\n\nhead(EEC_CSP_hors_na, 5)\n\n   SEXE ACTIF COURED AGE5 CSTOTR NAFG004UN AGE3 ANNEE JOURTR\n1 Homme     1      1   60      6        EU   50  2019      1\n2 Homme     1      1   60      6        EU   50  2019      1\n3 Homme     1      1   60      6        EU   50  2019      1\n4 Homme     1      1   40      4        ET   30  2019      5\n5 Femme     1      1   40      4        EV   30  2019      5\n\n\n\n\nLa fonction distinct() permet de ne s√©lectionner qu‚Äôune seule occurence de chaque combinaison des variables signal√©es.\nOn ne souhaite qu‚Äôune seule occurence de chaque combinaison existant dans les donn√©es des variables ANNEE et TRIM :\n\nEEC_periode &lt;- EEC_2019 %&gt;%\n  distinct(ANNEE, TRIM)\n\nhead(EEC_periode, 5)\n\n  ANNEE TRIM\n1  2019    1\n2  2019    2\n3  2019    3\n4  2019    4",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#cr√©er-une-variable",
    "href": "slides.html#cr√©er-une-variable",
    "title": "Prise en main des donn√©es avec R",
    "section": "Cr√©er une variable",
    "text": "Cr√©er une variable\n\nAvec if_elseAvec case_whenAvec une condition\n\n\nif_else est utilis√© pour renseigner une valeur si une condition est v√©rifi√©e, une autre sinon. La syntaxe est la suivante :\n\nmutate(nouvelle_variable = if_else(condition, valeur_condition_verifiee, valeur_sinon))\n\n\nEEC_agr &lt;- EEC_2019 %&gt;%\n  mutate(agriculture = if_else(NAFG004UN == \"ES\", 1, 0))\n\nhead(EEC_agr, 5)\n\n  ANNEE TRIM CATAU2010R METRODOM TYPMEN7 AGE3 AGE5 COURED ENFRED NFRRED  SEXE\n1  2019    1          1        1       1   50   60      2      2      1 Femme\n2  2019    2          1        1       3   50   60      1      2      1 Homme\n3  2019    2          1        1       3   50   60      1      2      1 Femme\n4  2019    3          1        1       3   50   60      1      2      1 Homme\n5  2019    3          1        1       3   50   60      1      2      1 Femme\n  ACTEU ACTEU6 ACTIF ACTOP AIDFAM ANCCHOM ANCINACT CONTACT CREACCP DEM DISPOC\n1     3      6     2     2     NA      NA       NA      NA      NA   0     NA\n2     1      1     1     1     NA      NA       NA      NA      NA   0     NA\n3     3      6     2     2      2      NA        8      NA      NA   0     NA\n4     1      1     1     1     NA      NA       NA      NA      NA   0     NA\n5     3      6     2     2      2      NA        8      NA      NA   0     NA\n  GARDEB HALOR INSCONT MRA MRB MRBBIS MRC MRD MRDBIS MRE MREC MRF MRG MRGBIS\n1     NA     2      NA  NA  NA     NA  NA  NA     NA  NA   NA  NA  NA     NA\n2     NA     2      NA  NA  NA     NA  NA  NA     NA  NA   NA  NA  NA     NA\n3     NA     2      NA  NA  NA     NA  NA  NA     NA  NA    2  NA  NA     NA\n4     NA     2      NA  NA  NA     NA  NA  NA     NA  NA   NA  NA  NA     NA\n5     NA     2      NA  NA  NA     NA  NA  NA     NA  NA    2  NA  NA     NA\n  MRH MRI MRJ MRK MRL MRM MRN MRO MRPASSA MRPASSB MRPASSC MRS NONDIC NREC NRECA\n1  NA  NA  NA  NA  NA  NA  NA  NA      NA      NA      NA  NA     NA   NA    NA\n2  NA  NA  NA  NA  NA  NA  NA  NA      NA      NA      NA  NA     NA   NA    NA\n3  NA  NA  NA  NA  NA  NA  NA  NA      NA      NA      NA  NA     NA   NA    NA\n4  NA  NA  NA  NA  NA  NA  NA  NA      NA      NA      NA  NA     NA   NA    NA\n5  NA  NA  NA  NA  NA  NA  NA  NA      NA      NA      NA  NA     NA   NA    NA\n  NRECB OCCREF OFFICC OFFRE PASTRA PASTRB PASTRF PERCREV RABS RAISNREC RAISNSOU\n1    NA      1     NA    NA     NA     NA     NA      NA   NA       NA       NA\n2    NA      2     NA    NA     NA     NA     NA      NA   NA       NA       NA\n3    NA      1     NA    NA      2      2      2      NA   NA       NA        5\n4    NA      2     NA    NA      1     NA      1       1    8       NA       NA\n5    NA      1     NA    NA      2      2      2      NA   NA       NA        5\n  RAISPAS SOU SOUA SOUB SOUC SOUSEMPL STCHE TEMP TRAREF TYPCONT TYPCONTB CHPUB\n1      NA  NA   NA   NA   NA       NA    NA    2     NA      NA       NA    NA\n2      NA   2    2    2   NA       NA    NA   NA      1      NA       NA     1\n3      NA   2   NA   NA    2       NA    NA   NA      2      NA       NA    NA\n4      NA   2    2    2   NA        3    NA   NA      2      NA       NA     1\n5      NA   2   NA   NA    2       NA    NA   NA      2      NA       NA    NA\n  CSE CSER CSP CSTOT CSTOTR FONCTC NAFG004UN NAFG010UN NAFG017UN NAFG021UN\n1  NA   NA  NA    86      8     NA                                        \n2  64    6  64    64      6     NA        EU        FZ        FZ         F\n3  NA   NA  NA    77      7     NA                                        \n4  64    6  64    64      6     NA        EU        FZ        FZ         F\n5  NA   NA  NA    77      7     NA                                        \n  NAFG038UN NAFG088UN PUB3FP QPRC STC RDET STAT2 STATOEP STATUT STATUTR TITC\n1                  NA     NA   NA  NA   NA    NA      NA     NA      NA   NA\n2        FZ        43      4    9   3   NA     2      35     35       5   NA\n3                  NA     NA   NA  NA   NA    NA      NA     NA      NA   NA\n4        FZ        43      4    9   3   NA     2      35     35       5   NA\n5                  NA     NA   NA  NA   NA    NA      NA     NA      NA   NA\n  CSTMN CSTPLC DISPPLC DUHAB GARDEA HHC6 HORAIC RAISON RAISTP STMN STPLC TPPRED\n1    NA     NA      NA    NA     NA   NA     NA     NA     NA   NA    NA     NA\n2    NA     NA      NA     1     NA    1      3     NA      5    2     2      2\n3    NA     NA      NA    NA     NA   NA     NA     NA     NA   NA    NA     NA\n4    NA     NA      NA     1     NA    1      3     NA      5    2     2      2\n5    NA     NA      NA    NA     NA   NA     NA     NA     NA   NA    NA     NA\n  TXTPPRED ANCENTR4 SITANT AAC CSA NAFANT NAFANTG004N DIP11 CSTOTPRM IDENTM\n1       NA       NA     NA   2   0      0          00    70       86      1\n2        1        4      5  NA  NA     NA                50       64      2\n3       NA       NA     NA   1  54     43          EU    70       64      2\n4        1        4      5  NA  NA     NA                50       64      3\n5       NA       NA     NA   1  54     43          EU    70       64      3\n    EXTRIAN EMPNBH HREC HHCE HPLUSA JOURTR NBTOTE agriculture\n1 107.74972     NA   NA   NA     NA     NA     NA           0\n2  46.17385      1   NA    1     NA      1     NA           0\n3  46.17385     NA   NA   NA     NA     NA     NA           0\n4  44.32930      0   NA    1     NA      1     NA           0\n5  44.32930     NA   NA   NA     NA     NA     NA           0\n\n\n\n\ncase_when permet de cr√©er une variable qui prend diff√©rentes modalit√©s selon plusieurs conditions √©valu√©es successivement, selon la syntaxe suivante :\n\nmutate(nouvelle_variable = case_when(condition1 ~ valeur1,\n                                     condition2 ~ valeur2,\n                                     condition3 ~ valeur3,\n                                     TRUE ~ valeur_par_d√©faut))\n\nLes conditions sont explor√©es successivement jusqu‚Äô√† ce qu‚Äôune d‚Äôentre elles donne TRUE, elles ne sont donc pas n√©cessairement exclusives l‚Äôune de l‚Äôautre. La derni√®re ligne ¬´ voiture balai ¬ª (qui n‚Äôest pas obligatoire) exploite cette fonctionnalit√© avec une condition toujours vraie qui pi√®ge tous les cas non explor√©s.\n\n\nll est √©galement possible de cr√©er directement une variable de type bool√©en en mentionnat uniquement la condition :\n\nmutate(individu_cadre = (CSTOTR == 3))\n\nLa nouvelle variable individu_cadre vaut TRUE lorsque CSTOTR vaut 3, FALSE sinon.",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#modifier-des-variables",
    "href": "slides.html#modifier-des-variables",
    "title": "Prise en main des donn√©es avec R",
    "section": "Modifier des variables",
    "text": "Modifier des variables\n\n\nRenommer une variableDiscr√©tiser une variable quanti\n\n\n\nrename(nouveau_nom_var1 = ancien_nom_var1,\n       nouveau_nom_var2 = ancien_nom_var2)\n\n\nEEC_2 &lt;- EEC_ex %&gt;%\n  rename(AGE_3_classes = AGE3)\n\nhead(EEC_2, 5)\n\n   SEXE ACTIF COURED AGE5 CSTOTR NAFG004UN AGE_3_classes ANNEE JOURTR\n1 Femme     2      2   60      8      &lt;NA&gt;            50  2019     NA\n2 Homme     1      1   60      6        EU            50  2019      1\n3 Femme     2      1   60      7      &lt;NA&gt;            50  2019     NA\n4 Homme     1      1   60      6        EU            50  2019      1\n5 Femme     2      1   60      7      &lt;NA&gt;            50  2019     NA\n\n\n\n\nAvec cut(), la borne inf√©rieure est exclue, la borne sup√©rieure est incluse.\n\nEEC_3 &lt;- EEC_ex %&gt;%\n  mutate(JOURTR_classe = cut(JOURTR, breaks = c(2,4)))\n\nhead(EEC_3, 5)\n\n   SEXE ACTIF COURED AGE5 CSTOTR NAFG004UN AGE3 ANNEE JOURTR JOURTR_classe\n1 Femme     2      2   60      8      &lt;NA&gt;   50  2019     NA          &lt;NA&gt;\n2 Homme     1      1   60      6        EU   50  2019      1          &lt;NA&gt;\n3 Femme     2      1   60      7      &lt;NA&gt;   50  2019     NA          &lt;NA&gt;\n4 Homme     1      1   60      6        EU   50  2019      1          &lt;NA&gt;\n5 Femme     2      1   60      7      &lt;NA&gt;   50  2019     NA          &lt;NA&gt;",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#convertir-des-variables",
    "href": "slides.html#convertir-des-variables",
    "title": "Prise en main des donn√©es avec R",
    "section": "Convertir des variables",
    "text": "Convertir des variables\nLes fonctions de conversion peuvent √™tre appliqu√©es aux colonnes d‚Äôun data.frame. Il est conseill√© d‚Äôaffecter √† chaque variable le type le plus proche de sa nature :\n\n#Conversion de la variable ENFRED en facteur et de la variable COURED en caract√®res :\n\nEEC_2019 &lt;- EEC_2019 %&gt;%\n  mutate(ENFRED = as.factor(ENFRED),\n         COURED = as.character(COURED))\n\n\n\n\nü§î Comment recoder ? ü§î\n\ntransformer les variables qualitatives en facteurs ;\nordonner les modalit√©s pour les variables qualitatives ordinales ;\nconvertir les variables num√©riques en num√©rique ;\nrecoder les valeurs manquantes (par exemple les caract√®res vides) ;\ntransformer les cha√Ænes de caract√®re en Date si n√©cessaire.\n\n\n‚ùì Pourquoi recoder ‚ùì\n\npour r√©aliser des statistiques descriptives plus rapidement, par exemple avec la fonction summary ;\npour que les fonctions √©conom√©triques d√©tectent une modalit√© de r√©f√©rence pertinente pour les variables ordinales ;\npour tracer des s√©ries temporelles dans le cas des dates‚Ä¶",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#la-fonction-count",
    "href": "slides.html#la-fonction-count",
    "title": "Prise en main des donn√©es avec R",
    "section": "La fonction COUNT",
    "text": "La fonction COUNT\n\n\nConnaitre le nombre de lignes d‚Äôun dataframe\n\nOn peut √©galement avoir cette information dans le panneau ‚Äúenvironnement‚Äù\n\nCompter le nombre d‚Äôindividus dans une table exhaustive\n\n‚õî Ne pas utiliser pour des donn√©es √©chantillon√©es ‚õî\n\n\n\nNe pas calculer par exemple le nombre de ch√¥meurs au sens du BIT sans pond√©ration √† partir de l‚ÄôEEC :\n\nchomeurs &lt;- EEC_2019 %&gt;% \n  filter(ACTEU == \"2\") %&gt;% \n  count()\n\nprint(paste0(\"Le nombre de ch√¥meurs au sens du BIT N'EST PAS \", as.character(chomeurs)))\n\n[1] \"Le nombre de ch√¥meurs au sens du BIT N'EST PAS 18602\"",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#la-fonction-summarise",
    "href": "slides.html#la-fonction-summarise",
    "title": "Prise en main des donn√©es avec R",
    "section": "La fonction summarise",
    "text": "La fonction summarise\n\nCette fonction permet d‚Äôavoir un ensemble de statistiques descriptives : effectif, somme, moyenne, m√©diane, quantile, min, max‚Ä¶\nElle est fr√©quemment utilis√©e avec l‚Äôinstruction group_by(), qui permet d‚Äôeffectuer ces calculs au sein des groupes form√©s par les modalit√©s d‚Äôune variable.\n\n\n\n\n\n\n\nGroup_by\n\n\nPour les habitu√©s de SQL, group_by n‚Äôest pas un mot cl√© mais une vraie fonction R avec une entr√©e et une sortie. Le r√©sultat est une table avec les m√™mes donn√©es mais un ¬´ index ¬ª en plus disant o√π sont les observations de chaque modalit√©. La pr√©sence de cet index change le fonctionnement de plusieurs fonctions de dplyr en les for√ßant √† travailler par morceau.",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#la-fonction-summarise-1",
    "href": "slides.html#la-fonction-summarise-1",
    "title": "Prise en main des donn√©es avec R",
    "section": "La fonction summarise",
    "text": "La fonction summarise\n\n\nEffectifSomme, moyenneDistributionPlusieurs variables\n\n\nLa fonction n() permet d‚Äôobtenir les effectifs.\nCalcul du nombre de personnes de 30 ans ou moins :\n\neff_moins_30 &lt;- EEC_2019 %&gt;%\n  filter(AGE3 &lt;= 30) %&gt;%\n  summarise(eff_moins_30 = n())\neff_moins_30\n\n  eff_moins_30\n1       195851\n\n\nCalcul du nombre de personnes par classe d‚Äô√¢ge en 3 classes :\n\neff_age_classe &lt;- EEC_2019 %&gt;%\n  group_by(AGE3) %&gt;%\n  summarise(eff_age3 = n())\neff_age_classe\n\n# A tibble: 3 √ó 2\n   AGE3 eff_age3\n  &lt;int&gt;    &lt;int&gt;\n1    15    78826\n2    30   117025\n3    50   220447\n\n\nCalcul du nombre de personnes par SEXE :\n\neff_sexe &lt;- EEC_2019 %&gt;%\n  group_by(SEXE) %&gt;%\n  summarise(eff_sexe = n())\neff_sexe\n\n# A tibble: 2 √ó 2\n  SEXE  eff_sexe\n  &lt;fct&gt;    &lt;int&gt;\n1 Homme   196098\n2 Femme   220200\n\n\n\n\nLes fonctions sum() et mean() peuvent √™tre utilis√©es √©galement avec summarise().\n\n\n\n\n\n\nWarning\n\n\nTout calcul impliquant un NA restitue un NA : les op√©rations, les tests, les tris. Dans les calculs statistiques (par exemple avec les fonctions appel√©es par le summarise de dplyr utilis√© pour faire des r√©capitulations : comptages, totaux ou autres statistiques), il y a g√©n√©ralement un argument suppl√©mentaire na.rm (pour ‚Äúremove‚Äù) qui permet de ne pas tenir compte des valeurs manquantes, mais son positionnement par d√©faut est souvent √† ‚Äúfaux‚Äù (FALSE, ne pas enlever les valeurs manquantes du calcul).\n\n\n\n‚ö†Ô∏è ATTENTION ‚ö†Ô∏è Les valeurs manquantes sont le principal point d‚Äôincompatibilit√© avec SAS et leur traitement n√©cessite de redoubler d‚Äôattention quand on convertit un programme car le fonctionnement est radicalement diff√©rent en R.\nCalcul de la moyenne du nombre de jours travaill√©s par semaine par sexe :\n\nEEC_jourtr_sexe &lt;- EEC_2019 %&gt;%\n  group_by(SEXE) %&gt;%\n  summarise(moy_jour_tr = mean(JOURTR, na.rm = TRUE))\nEEC_jourtr_sexe\n\n# A tibble: 2 √ó 2\n  SEXE  moy_jour_tr\n  &lt;fct&gt;       &lt;dbl&gt;\n1 Homme        5.01\n2 Femme        4.74\n\n\n\n\nsummarise() est √©galement utile pour des statistiques de distribution.\nCalcul de statistiques de distribution du nombre de jours travaill√©s par semaine par classe d‚Äô√¢ge :\n\nEEC_jourtr_age &lt;- EEC_2019 %&gt;%\n  group_by(AGE3) %&gt;%\n  summarise(min_jour_tr = min(JOURTR, na.rm = TRUE),\n            q1_jour_tr = quantile(JOURTR, na.rm = TRUE, probs = 0.25),\n            med_jour_tr = median(JOURTR, na.rm = TRUE),\n            q3_jour_tr = quantile(JOURTR, na.rm = TRUE, probs = 0.75),\n            max_jour_tr = max(JOURTR, na.rm = TRUE))\nEEC_jourtr_age\n\n# A tibble: 3 √ó 6\n   AGE3 min_jour_tr q1_jour_tr med_jour_tr q3_jour_tr max_jour_tr\n  &lt;int&gt;       &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;\n1    15         0.5          5           5          5           7\n2    30         0.5          5           5          5           7\n3    50         0.5          5           5          5           7\n\n\n\n\nIl est possible de renseigner plusieurs variables dans l‚Äôinstruction group_by(). Les statistiques demand√©es dans summarise() sont alors calcul√©es au sein de chaque classe form√©e par le croisement des modalit√©s des deux variables.\n‚ö†Ô∏è ATTENTION ‚ö†Ô∏è la valeur par d√©faut de l‚Äôargument drop_last de la fonction summarise() est TRUE, ce qui implique que le dernier niveau de regroupement (la derni√®re variable renseign√©e dans le group_by()) est supprim√© √† l‚Äôissue de l‚Äôapplication de la fonction summarise(). Un warning le pr√©cise dans la console lorsque cette fonction est utilis√©e avec plusieurs variables de regroupement.\nCalcul de la moyenne de jours travaill√©s par semaine par groupe de sexe crois√© avec l‚Äô√¢ge en 3 classes :\n\nEEC_jourtr_sexe_age &lt;- EEC_2019 %&gt;%\n  group_by(SEXE, AGE3) %&gt;%\n  summarise(moy_jour_tr = mean(JOURTR, na.rm = TRUE))\nEEC_jourtr_sexe_age\n\n# A tibble: 6 √ó 3\n# Groups:   SEXE [2]\n  SEXE   AGE3 moy_jour_tr\n  &lt;fct&gt; &lt;int&gt;       &lt;dbl&gt;\n1 Homme    15        4.94\n2 Homme    30        5.02\n3 Homme    50        5.02\n4 Femme    15        4.71\n5 Femme    30        4.76\n6 Femme    50        4.73",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#regrouper-par-cat√©gorie",
    "href": "slides.html#regrouper-par-cat√©gorie",
    "title": "Prise en main des donn√©es avec R",
    "section": "Regrouper par cat√©gorie",
    "text": "Regrouper par cat√©gorie\nL‚Äôop√©rateur pipe %&gt;% permet d‚Äôencha√Æner les op√©rations sur une table de donn√©es.\nIl faut faire attention √† cet encha√Ænement lorsqu‚Äôon utilise l‚Äôinstruction group_by. Cette instruction peut √™tre utilis√©e avec d‚Äôautres fonctions de dplyr (filter() et mutate() par exemple), mais elle ne se comporte pas de la m√™me mani√®re avec toutes les fonctions. En effet, le dernier niveau de regroupement (la derni√®re variable renseign√©e dans le group_by()) est supprim√© √† l‚Äôissue de l‚Äôapplication de la fonction summarise(), tandis que ce n‚Äôest pas le cas avec les fonctions mutate() et filter().\nAinsi, il est possible d‚Äôutiliser l‚Äôinstruction ungroup() pour rem√©dier au regroupement des observations dans la suite des op√©rations sur la table.\n\nex_plusieurs_gpes &lt;- EEC_2019 %&gt;%\n  group_by(SEXE, AGE3) %&gt;%\n  mutate(moy_jour_tr = mean(JOURTR, na.rm = TRUE)) %&gt;%\n  ungroup() %&gt;%\n  distinct(SEXE, moy_jour_tr, AGE3) %&gt;%\n  group_by(SEXE) %&gt;%\n  filter(moy_jour_tr == min(moy_jour_tr))\n\nex_plusieurs_gpes\n\n# A tibble: 2 √ó 3\n# Groups:   SEXE [2]\n  SEXE  moy_jour_tr  AGE3\n  &lt;fct&gt;       &lt;dbl&gt; &lt;int&gt;\n1 Homme        4.94    15\n2 Femme        4.71    15",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#trier-ses-donn√©es",
    "href": "slides.html#trier-ses-donn√©es",
    "title": "Prise en main des donn√©es avec R",
    "section": "Trier ses donn√©es",
    "text": "Trier ses donn√©es\nLorsqu‚Äôon utilise un regroupement, le r√©sultat est tri√© en majeur selon ce regroupement. Si on souhaite effectuer un autre tri, il faut d√©clencher le tri avec la fonction arrange(). Le mot cl√© desc (malgr√© la syntaxe, ce n‚Äôest pas une fonction) permet de trier par ordre d√©croissant. Il est possible d‚Äôutiliser plusieurs colonnes pour le tri.\nüëÅÔ∏è‚Äçüó®Ô∏è REMARQUE üëÅÔ∏è‚Äçüó®Ô∏è Contrairement √† SAS o√π trier est la proc√©dure la plus utilis√©e, R se charge de lui m√™me de faire les tris dont il pourrait avoir besoin. Trier n‚Äôa g√©n√©ralement un sens que pour organiser la pr√©sentation de r√©sultats.\n\nex_arrange &lt;- EEC_2019 %&gt;%\n  select(SEXE, AGE3, JOURTR) %&gt;%\n  group_by(SEXE, AGE3) %&gt;%\n  summarise(moy_jour_tr = mean(JOURTR, na.rm = TRUE)) %&gt;%\n  arrange(moy_jour_tr)\nex_arrange\n\n# A tibble: 6 √ó 3\n# Groups:   SEXE [2]\n  SEXE   AGE3 moy_jour_tr\n  &lt;fct&gt; &lt;int&gt;       &lt;dbl&gt;\n1 Femme    15        4.71\n2 Femme    50        4.73\n3 Femme    30        4.76\n4 Homme    15        4.94\n5 Homme    50        5.02\n6 Homme    30        5.02\n\n\nREMARQUE : Contrairement √† SAS o√π trier est la proc√©dure la plus utilis√©e, R se charge de lui m√™me de faire les tris dont il pourrait avoir besoin. Trier n‚Äôa g√©n√©ralement un sens que pour organiser la pr√©sentation de r√©sultats.",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#connaitre-le-num√©ro-de-ligne",
    "href": "slides.html#connaitre-le-num√©ro-de-ligne",
    "title": "Prise en main des donn√©es avec R",
    "section": "Connaitre le num√©ro de ligne",
    "text": "Connaitre le num√©ro de ligne\nLa fonction row_number() permet de conna√Ætre l‚Äôordre de classement de l‚Äôobservation dans la table.\nLes fonctions first() et last() permettent de r√©cup√©rer respectivement la premi√®re et la derni√®re observation d‚Äôun groupe.\n\nex_arrange_2 &lt;- EEC_2019 %&gt;%\n  select(SEXE, AGE3, JOURTR) %&gt;%\n  group_by(SEXE, AGE3) %&gt;%\n  summarise(moy_jour_tr = mean(JOURTR, na.rm = TRUE)) %&gt;%\n  arrange(moy_jour_tr) %&gt;%\n  mutate(numero = row_number())\nex_arrange_2\n\n# A tibble: 6 √ó 4\n# Groups:   SEXE [2]\n  SEXE   AGE3 moy_jour_tr numero\n  &lt;fct&gt; &lt;int&gt;       &lt;dbl&gt;  &lt;int&gt;\n1 Femme    15        4.71      1\n2 Femme    50        4.73      2\n3 Femme    30        4.76      3\n4 Homme    15        4.94      1\n5 Homme    50        5.02      2\n6 Homme    30        5.02      3",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#travailler-avec-des-donn√©es-pond√©r√©es",
    "href": "slides.html#travailler-avec-des-donn√©es-pond√©r√©es",
    "title": "Prise en main des donn√©es avec R",
    "section": "Travailler avec des donn√©es pond√©r√©es",
    "text": "Travailler avec des donn√©es pond√©r√©es\nLe package Hmisc permet de traiter des donn√©es pond√©r√©es.\nDes fonctions utilisant des pond√©rations se trouvent dans le package Hmisc, elles utilisent un argument suppl√©mentaire weights qui permet de passer la colonne contenant les pond√©rations. Il s‚Äôagit de :\n\nwtd.mean : la moyenne\nwtd.var : la variance (en d√©duire l‚Äô√©cart type si besoin)\nwtd.quantile : un quantile, plusieurs algorithmes sont impl√©ment√©s, mais aucun ne correspond √† ce que fait SAS.\n\n\ndf &lt;- data.frame(age = c(20, 30, 40, 50, 60), poids=c(1, 1, 1, 1, 3))\n\nlibrary(Hmisc)\n\nnew_df &lt;- df %&gt;% \n  summarise(quartile1 = wtd.quantile(age,w=poids,probs=.25),\n            mediane = wtd.quantile(age,w=poids,probs=.5),\n            moyenne = wtd.mean(age,w=poids))",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#concat√©nations",
    "href": "slides.html#concat√©nations",
    "title": "Prise en main des donn√©es avec R",
    "section": "Concat√©nations",
    "text": "Concat√©nations\n\nDes lignesDes colonnes\n\n\n\nMettre les lignes d‚Äôune table derri√®re les lignes d‚Äôune autre : la fonction bind_rows()\n\nLes deux listes de colonnes peuvent ne pas √™tre strictement identiques : les donn√©es ne sont mises bout √† bout que si les noms des colonnes co√Øncident, sinon des valeurs manquantes sont g√©n√©r√©es.\nLes colonnes peuvent √™tre dans un ordre diff√©rent dans les deux tables, la fonction se charge de les r√©ordonner.\nPar contre une colonne de m√™me nom doit avoir le m√™me type dans les deux tables ou la concat√©nation ne se fait pas.\n\n\n\n\nMettre les colonnes d‚Äôune table √† cot√© des colonnes d‚Äôune autre : la fonction bind_cols().\n\nLe nombre de lignes doit co√Øncider dans les deux tables : c‚Äôest un garde-fou contre les erreurs de manipulation, car la fonction ne r√©alise pas une jointure mais une simple juxtaposition.\nL‚Äôusage de cette fonction est donc plus rare et limit√© aux situations o√π on est absolument s√ªr d‚Äôavoir le bon nombre de lignes et des donn√©es qui sont rang√©es de la m√™me fa√ßon dans les deux tables.",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#jointures",
    "href": "slides.html#jointures",
    "title": "Prise en main des donn√©es avec R",
    "section": "Jointures",
    "text": "Jointures\n\nA gauche/√† droiteInterneExterneAnti_join\n\n\n\n\n\n\ntable_jointe &lt;- table_1 %&gt;%\n  left_join(table_2, by = c(\"var1_table1\" = \"var2_table2\",\n                            \"var3_table1\" = \"var4_table2\"))\n\n\n\n\n\n\n\n\n\n\n\ntable_jointe &lt;- table_1 %&gt;%\n  inner_join(table_2, by = c(\"var1_table1\" = \"var2_table2\",\n                             \"var3_table1\" = \"var4_table2\"))\n\n\n\n\n\n\n\n\n\n\n\ntable_jointe &lt;- table_1 %&gt;%\n  full_join(table_2, by = c(\"var1_table1\" = \"var2_table2\",\n                            \"var3_table1\" = \"var4_table2\"))\n\n\n\n\n\n\n\n\nPour r√©cup√©rer les observations de la table de gauche qui sont absentes de la table de droite.\n\n\n\ntable_jointe &lt;- table_1 %&gt;%\n  anti_join(table_2, by = c(\"var1_table1\" = \"var2_table2\",\n                            \"var3_table1\" = \"var4_table2\"))",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#transpositions",
    "href": "slides.html#transpositions",
    "title": "Prise en main des donn√©es avec R",
    "section": "Transpositions",
    "text": "Transpositions\n\nPour pivoter des donn√©es, il est possible d‚Äôutiliser les fonctions pivot_longer() et pivot_wider() du package tidyr.\nPar exemple, pour la fonction pivot_longer(), la syntaxe est la suivante : pivot_longer(cols = c(\"Var_1_pivotee\", \"Var_2_pivotee\"), names_to = c(\"nom_de_la_nouvelle_colonne\"))\n\nlibrary(tidyr)\n\nex_pivot &lt;- EEC_2019 %&gt;%\n  select(SEXE, AGE3, JOURTR) %&gt;%\n  group_by(SEXE, AGE3) %&gt;%\n  summarise(moy_jour_tr = mean(JOURTR, na.rm = TRUE),\n            med_jour_tr = median(JOURTR, na.rm = TRUE)) %&gt;%\n  ungroup() %&gt;%\n  pivot_longer(cols = c(\"moy_jour_tr\", \"med_jour_tr\"), names_to = c(\"indicateur\"))\nex_pivot\n\n# A tibble: 12 √ó 4\n   SEXE   AGE3 indicateur  value\n   &lt;fct&gt; &lt;int&gt; &lt;chr&gt;       &lt;dbl&gt;\n 1 Homme    15 moy_jour_tr  4.94\n 2 Homme    15 med_jour_tr  5   \n 3 Homme    30 moy_jour_tr  5.02\n 4 Homme    30 med_jour_tr  5   \n 5 Homme    50 moy_jour_tr  5.02\n 6 Homme    50 med_jour_tr  5   \n 7 Femme    15 moy_jour_tr  4.71\n 8 Femme    15 med_jour_tr  5   \n 9 Femme    30 moy_jour_tr  4.76\n10 Femme    30 med_jour_tr  5   \n11 Femme    50 moy_jour_tr  4.73\n12 Femme    50 med_jour_tr  5   \n\n\nL‚Äôarticle Les pivots expliqu√©s √† ma fille est particuli√®rement bien fait sur le sujet.",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#graphiques-avec-plot",
    "href": "slides.html#graphiques-avec-plot",
    "title": "Prise en main des donn√©es avec R",
    "section": "Graphiques avec plot",
    "text": "Graphiques avec plot\nVoici une pr√©sentation succinte de quelques fonctions usuelles de Rbase permettant de faire des graphiques :\n\nBarplotHistPlot\n\n\n\nex_barplot &lt;- EEC_2019 %&gt;%\n  select(SEXE, JOURTR) %&gt;%\n  group_by(SEXE) %&gt;%\n  summarise(moy_jour_tr = mean(JOURTR, na.rm = TRUE))\n\nbarplot(ex_barplot$moy_jour_tr, legend.text = ex_barplot$SEXE)\n\n\n\n\n\n\n\n\n\n\n\nex_hist &lt;- EEC_2019 %&gt;%\n  select(JOURTR)\n\nhist(ex_hist$JOURTR)\n\n\n\n\n\n\n\n\n\n\n\ndata(iris)\nplot(x = iris$Sepal.Length, y = iris$Sepal.Width)",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "slides.html#ressources-sur-ggplot2",
    "href": "slides.html#ressources-sur-ggplot2",
    "title": "Prise en main des donn√©es avec R",
    "section": "Ressources sur ggplot2",
    "text": "Ressources sur ggplot2\n\nLe package ggplot2 permet de cr√©er des graphiques tr√®s souplement, en modifiant une grande partie des param√®tres. Il ne fait pas l‚Äôobjet d‚Äôune pr√©sentation ici, mais pour s‚Äôy former, la fiche UtilitR sur le sujet UtilitR-Ggplot2 , ainsi que le site R-graph-gallery vous sont recommand√©s.\nEnfin, pour avoir des recommandations sur les diff√©rents types de visualisation possibles selon la nature des variables √† repr√©senter, le site From Data to Viz est tr√®s utile.",
    "crumbs": [
      "Slides"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Formation R",
    "section": "",
    "text": "Note\n\n\n\n\nR et R studio sont disponibles sur le centre logiciel ainsi que sur posit.\nLe cahier d‚Äôexercice est disponible sur Gitlab.\n\n\n\n\n1 Objectifs ‚úîÔ∏è\n\nConnaitre l‚Äôenvironnement R (packages, objets)\nImporter, nettoyer et enrichir ses donn√©es\nProduire des statisitiques descriptives\nProduire un code reproductible suivant les r√®gles de bonne conduite\n\n\n\n2 Emploi du temps\n\n\n\nDur√©e\nProgramme\n\n\n\n\n2 heures\nSlides : Formation th√©orique jusqu‚Äô√† la slide 41\n\n\n45 minutes\nExercice 1 : D√©buter avec R\n\n\n1 heure\nFin des Slides : Formation th√©orique\n\n\n45 minutes\nExercice 2 : Nettoyer et enrichir les donn√©es\n\n\n45 minutes\nExercice 3 : Statistiques descriptives\n\n\n45 minutes\nExercice 4 : Pour aller plus loin\n\n\n\n\n\n3 Des outils utiles √† connaitre üß∞\n\n\n\n\n\n\nLes fonctions help et ? permettent d‚Äôavoir des informations sur la fonction que l‚Äôon utilise\n\n\n\n\n\nLa fonction help est tr√®s pratique pour se renseigner sur une fonction. Elle montre tous les arguments de la fonction et propose des exemples.\n\n# Permet d'avoir les informations sur la fonction mean \nhelp(\"mean\") \n?mean\n\n\n\n\n\n\n\n\n\n\nLes op√©rateurs R\n\n\n\n\n\n\n\n\n\n\n\n\n\nOp√©rateur\nSignification\nExemple\n\n\n\n\n+\nSomme\nmutate(variable = variable + 1)\n\n\n/\nDivision\nmutate(variable = variable / 100)\n\n\n*\nMultiplication\nmutate(variable = variable * 100)\n\n\n&\net\nfilter(variable &gt; 10 & variable &lt; 20)\n\n\n|\nou\nfilter(variable_1 == 10 | variable_2 == 20)\n\n\n==\n√©gal\nfilter(variable == 10)\n\n\n!=\ndiff√©rent\nfilter(variable != 10)\n\n\n&lt;\ninf√©rieur\nfilter(variable &lt; 10)\n\n\n&gt;\nsup√©rieur\nfilter(variable &gt; 10)\n\n\n&lt;=\ninf√©rieur ou √©gal\nfilter(variable &lt;= 10)\n\n\n&gt;=\nsup√©rieur ou √©gal\nfilter(variable &gt;= 10)\n\n\n%in%\nappartenant\nfilter(variable %in% c(10,20,30)\n\n\n\n\n\n\n\n\n\n\n\n\nAvoir des informations sur sa session avec la fonction sessionInfo()\n\n\n\n\n\nCeci permet de connaitre sa version de R, les packages attach√©s √† la session, etc.\n\nsessionInfo() # Permet d'avoir des informations sur la session en cours dont la version de R\ngetRversion() # Permet d'identifier la version de R\nversion() # Permet d'obtenir diff√©rentes informations sur R\n\n\n\n\n\n\n\n\n\n\nConnaitre les packages install√©s sur son environnement avec library()\n\n\n\n\n\n\nlibrary() # Permet de connaitre les packages install√©s\n\n\n\n\n\n\n\n\n\n\nConnaitre les packages charg√©s dans son environnement avec search()\n\n\n\n\n\n\nsearch() # Permet de connaitre les packages charg√©s \n\n\n\n\n\n\n\n\n\n\nConnaitre la version d‚Äôun package avec packageVersion()\n\n\n\n\n\n\npackageVersion(\"dplyr\") # Permet de connaitre la version du package dplyr",
    "crumbs": [
      "Introduction"
    ]
  },
  {
    "objectID": "exercice_2.html",
    "href": "exercice_2.html",
    "title": "Exercice 2 : Nettoyer et enrichir les donn√©es",
    "section": "",
    "text": "Pr√©c√©demment, nous avons vu comment se renseigner sur un objet (type, nom des colonnes, nombre d‚Äôobservations) et comment encha√Æner les pipes pour s√©lectionner, filtrer et enrichir ses donn√©es.\n\n1 Cr√©er un projet RStudio\n\nCr√©er un nouveau projet RStudio.\nCr√©er un script R et l‚Äôenregistrer dans le dossier du projet.\nCopier les donn√©es de l‚ÄôEnqu√™te Emploi 2019 dans le dossier du projet RStudio, c‚Äôest-√†-dire dans le m√™me dossier que le fichier .Rproj.\nCharger le package dplyr.\n\n\nCode\n#install.packages(\"dplyr\") # Installation du package si besoin\nlibrary(\"dplyr\") # Chargement du package : n√©cessaire √† chaque d√©but de session de travail dans R Studio\n\n\n\n\n\n\n2 Importer les donn√©es de l‚ÄôEnqu√™te emploi 2019\n\nImporter les donn√©es .csv de l‚ÄôEnqu√™te emploi 2019 avec la fonction read.csv2 et lui assigner le nom EEC_2019.\n\n\nCode\nEEC_2019 &lt;- read.csv2(\"FD_EEC_2019.csv\", \n                      header = TRUE, \n                      sep = \";\", \n                      quote = \"\\\"\", \n                      dec = \".\", \n                      fill = TRUE, \n                      comment.char = \"\")\n\n\nObtenir des informations sur le dataframe\n\nNombre de lignes\nNom des colonnes\nModalit√©s de certaines variables\nType des variables\n\n\n\nCode\nnrow(EEC_2019) # Nombre de lignes\ncolnames(EEC_2019) # Nom des colonnes\nstr(EEC_2019) # Informations sur le dataframe et les variables\n\n\n\n\n\n\n3 Mettre en forme ses donn√©es\nOn va d√©sormais encha√Æner les op√©rations, il faut donc cr√©er un dataframe et encha√Æner les pipes pour obtenir notre dataframe final.\n\nCr√©er un dataframe en gardant uniquement les variables de la liste suivante : TRIM, ANNEE, AGE5, SEXE, ACTEU, RABS, CSTOTR, HHC6, EXTRIAN, ACTIF, NAFG088UN\n\n\nCode\ndf_final &lt;- EEC_2019 %&gt;% \n  select(TRIM, \n         ANNEE, \n         AGE5, \n         SEXE, \n         ACTEU, \n         RABS, \n         CSTOTR, \n         HHC6, \n         EXTRIAN, \n         ACTIF, \n         NAFG088UN) # Garder uniquement les variables contenues dans liste_variable \n\n\nDans le nouveau dataframe, cr√©er une variable trimestre concat√©nant la variable TRIM et ANNEE √† l‚Äôaide de la fonction paste0(). Nous souhaitons obtenir une variable sous la forme ‚Äú2019-T4‚Äù.\n\n\nCode\n... %&gt;% mutate(trimestre = paste0(ANNEE,\"-T\",TRIM))\n\n\nAfficher les modalit√©s de la variable RABS.\n\n\nCode\nunique(EEC_2019$RABS)\n\n\nRemplacer les NA de la variable RABS par des 0 avec la fonction replace().\n\n\nCode\n... %&gt;% mutate(RABS = replace(RABS, is.na(RABS), 0))\n\n# Autre solution avec ifelse\n... %&gt;% mutate(RABS = ifelse(is.na(RABS) == TRUE, 0, RABS))\n\n\nRemplacer les NA de toutes les variables par des 0 avec la fonction mutate_all().\n\n\nCode\n... %&gt;% mutate_all( ~ replace(., is.na(.) == TRUE, 0)) # Mutate all permet de modifier toutes les variables \n\n\nLes donn√©es de l‚Äôenqu√™te emploi sont des donn√©es pond√©r√©es, renommer la variable EXTRIAN par POIDS.\n\n\nCode\n... %&gt;% rename(POIDS = EXTRIAN)\n\n\nTrier les donn√©es par trimestre dans l‚Äôordre croissant √† l‚Äôaide de la fonction arrange().\n\n\nCode\n... %&gt;% arrange(trimestre) # Tri du dataframe en fonction du trimestre\n\n\n\n\n\n\n4 Cr√©er des variables conditionnelles\n\nA l‚Äôaide de la fonction if_else(), ajouter une variable chomage prenant la valeur ‚Äúoui‚Äù lorsque la variable ACTEU prend la valeur 2, ‚Äúnon‚Äù sinon.\n\n\nCode\n... %&gt;% mutate(chomage = if_else(ACTEU == \"2\", \"oui\", \"non\"))\n\n\nA l‚Äôaide de la fonction case_when(), cr√©er une variable statut_activite_libelle prenant les modalit√©s ci-dessous :\n\n\nCode\n... %&gt;% mutate(statut_activite_libelle = case_when(ACTEU == \"0\" ~  \"Sans objet\",\n                                      ACTEU == \"1\" ~  \"Actif occup√©\",\n                                      ACTEU == \"2\" ~  \"Ch√¥meur\",\n                                      ACTEU == \"3\" ~  \"Inactif\",\n                                      TRUE ~ \"Oubli\"))\n\n\n\n\n\n\nModalit√©\nD√©fintion\n\n\n\n\n‚Äú0‚Äù\nSans objet\n\n\n‚Äú1‚Äù\nActif occup√©\n\n\n‚Äú2‚Äù\nCh√¥meur\n\n\n‚Äú3‚Äù\nInactif\n\n\n\n\n\n\n\n\n\nBonne pratique\n\n\n\nLors de la cr√©ation d‚Äôune variable conditionnelle avec la fonction case_when(), il est conseill√© de syst√©matiquement d√©finir une valeur par d√©faut avec une derni√®re condition fix√©e √† TRUE, qui permettra de rep√©rer les cas ‚Äúoubli√©s‚Äù, non concern√©s par les conditions pr√©c√©dentes.\n\n\n\n\n\n5 Joindre des donn√©es\nNous allons d√©sormais r√©cup√©rer les intitul√©s de la NAF en 88 postes (variable NAFG088UN) √† l‚Äôaide des jointures.\n\n\n\n\n\n\nNote\n\n\n\nEn copiant le fichier naf2008_liste_n2.xlsx dans le dossier du projet, on utilise les avantages des chemins relatifs et on peut ne sp√©cifier que le nom du fichier dans l‚Äôimport, sans le chemin absolu sur le disque.\n\n\n\nImporter le fichier naf2008_liste_n2.xlsx via la fonction read.xlsx() du package openxlsx. Attention, les donn√©es √† importer commencent √† la troisi√®me ligne du document Excel. Trouver l‚Äôoption de read.xlsx() qui permet de le sp√©cifier\n\n\nCode\n#install.packages(\"openxlsx) # Installation du package si n√©cessaire\nlibrary(openxlsx)\nintitule_naf &lt;- read.xlsx(\"naf2008_liste_n2.xlsx \",\n                          startRow = 3) \n\n\nCr√©er un dataframe unique en joignant les libell√©s NAF via la fonction inner_join(). Pourquoi le nombre d‚Äôobservations de df_final_inner est inf√©rieur √† celui de df_final ?\n\n\nCode\ndf_final_inner &lt;- df_final %&gt;% \n  mutate(NAFG088UN = as.character(NAFG088UN)) %&gt;%\n  inner_join(intitule_naf, by = join_by(\"NAFG088UN\" == \"Code\")) \n\n\n\n\n\n\n\n\n\nTip\n\n\n\nDeux conseils pour r√©aliser la jointure : Les variables permettant de r√©aliser la jointure ne portent pas le m√™me nom. Il est toujours utile de regarder les exemples d‚Äôutilisation propos√©s dans l‚Äôaide de la fonction ?inner_join. Les variables de jointure ne doivent pas obligatoirement porter le m√™me nom, mais elles doivent √™tre de m√™me type pour que la jointure fonctionne. A vous de jouer pour trouver la solution !\n\n\n\nComment faire pour conserver toutes les observations de df_final en joingnant les libell√©s NAF ? Cr√©er un nouveau data.frame qui r√©pond √† la question.\n\n\nCode\ndf_final_left &lt;- df_final %&gt;% \n  mutate(NAFG088UN = as.character(NAFG088UN)) %&gt;%\n  left_join(intitule_naf, by = join_by(\"NAFG088UN\" == \"Code\"))\n\n\nCr√©er un dataframe qui correspond √† la jointure de df_final et des libell√©s NAF via la fonction full_join(). Qu‚Äôest ce que cette jointure permet de faire ?\n\n\nCode\ndf_final_full &lt;- df_final %&gt;% \n  mutate(NAFG088UN = as.character(NAFG088UN)) %&gt;%\n  full_join(intitule_naf, by = join_by(\"NAFG088UN\" == \"Code\"))\n\n\nLequel de ces data frames joints avec les libell√©s conservieriez-vous pour une √©tude avec les donn√©es EEC ?\n\n\n\n\n\n\n\nLes principaux types de jointure\n\n\n\n\n\n\ninner_join() : Retourne les observations lorsque l‚Äôidentifiant est pr√©sent dans les deux tables.\n\n\n\nleft_join() : Retourne toutes les observations de la table de gauche, m√™me si l‚Äôidentifiant n‚Äôest pas pr√©sent dans la table de droite.\n\n\n\nright_join() : Retourne toutes les observations de la table de droite, m√™me si l‚Äôidentifiant n‚Äôest pas pr√©sent dans la table de gauche.\n\n\n\nfulljoin() : Retourne l‚Äôensemble des observations des deux tables, m√™me lorsque l‚Äôidentifiant ne se retrouve que dans l‚Äôune des tables.\n\n\n\n\n\n\n\n\n\n\n\nEmpiler ou coller des donn√©es\n\n\n\n\n\nAvec R, nous pouvons aussi empiler des donn√©es avec bind_cols() ou bien les coller entre elles avec bind_rows(). Cependant, nous vous conseillons d‚Äôutiliser les jointures classiques (inner_join, left_join, ‚Ä¶) qui permettent toutes les possibilit√©s avec des identifiants de jointure.\n\nbind_cols() permet d‚Äôaccoler 2 objets via les colonnes. Il est n√©cessaire que les variables et l‚Äôordre dans lequel elles apparaissent correspondent.\n\n\n\nbind_rows() permet d‚Äôaccoler 2 objets via les lignes.\n\n\n\n\n\n\n\n\n6 Enregistrer ses donn√©es\nNous avons d√©sormais un dataframe propre et utilisable pour cr√©er des statistiques descriptives : le df_final_left.\n\nSauvegarder dans un dossier son dataframe propre au format .xlsx √† l‚Äôaide de la fonction write.xlsx(). v√©rifier que le fichier est bien enregistr√© √† l‚Äôendroit renseign√©.\n\n\nCode\nwrite.xlsx(df_final_left, file = \"df.xlsx\") # Enregistrement du dataframe\n\n\nCharger son dataframe √† l‚Äôaide de la fonction read.xlsx() pour v√©rifier que la sauvegarde est correcte.\n\n\nCode\ndf_charge &lt;- read.xlsx(\"df.xlsx\") # Chargement du dataframe\n\n\nEnregister son fichier et passer √† l‚Äôexercice 3.",
    "crumbs": [
      "Exercice 2"
    ]
  },
  {
    "objectID": "exercice_4.html",
    "href": "exercice_4.html",
    "title": "Exercice 4 : Pour aller plus loin",
    "section": "",
    "text": "Nous avons vu pr√©c√©demment comment importer, traiter et r√©sumer ses donn√©es.\n\n1 Cr√©er un R projet\nTravailler via un R project est une bonne pratique, cela permet √©galement de faciliter l‚Äôacc√®s √† des dossiers puisque la racine est d√©finie par l‚Äôemplacement du R project.\n\nCr√©er un R project et l‚Äôenregistrer.\nConnaitre o√π se situe la racine du projet grace √† getwd().\n\n\nCode\ngetwd() # Permet de connaitre la racine du working directory\n\n\nInstaller si besoin et charger les packages dplyr, haven, tidyr, lubridate et ggplot2.\n\n\nCode\n# install.packages(haven) \nlibrary(haven) \nlibrary(lubridate)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(tidyr)\n\n\n\n\n\n\n2 Importer des donn√©es SAS sur les demandeurs d‚Äôemploi\nLes fichiers SAS sont encore nombreux au sein du SSP, nous allons donc voir comment traiter ces donn√©es.\n\nImporter les donn√©es SAS du nombre de demandeurs d‚Äôemploi via la fonction read_sas() du package haven.\n\n\nCode\ndefm &lt;- read_sas(\"defm_trim.sas7bdat\")\n\n\nChanger le format de la date pour le passer au format Date, attention √† l‚Äôorigine des dates.\n\n\nCode\n... %&gt;% mutate(Date = as.Date(Date, origin = \"1960-01-01\"))\n\n\n\n\n\n\n\n\n\nL‚Äôorigine des dates\n\n\n\n\n\n\nEn SAS, la date de r√©f√©rence d‚Äôune date est le 1er janvier 1950\nEn R, la date de r√©f√©rence d‚Äôune date est le 1er janvier 1960\n\nLorsque l‚Äôon importe un fichier SAS en R, il faut donc bien pr√©ciser l‚Äôorigine de la date dans la fonction as.Date(x, origin = \"1960-01-01\").\n\n\n\n\n\n\n3 Manipuler les dates\n\nCr√©er une nouvelle variable prenant pour valeur le premier jour du premier mois du trimestre plut√¥t que le premier jour du dernier mois via la fonction months().\n\n\nCode\n... %&gt;% mutate(deb_trimestre = date - months(2))\n\n\nCalculer l‚Äô√©cart entre les 2 dates en jours, puis en semaines via la fonction difftime().\n\n\nCode\n... %&gt;% mutate(diff_jour = difftime(date, deb_trimestre, units = \"days\"),\n           diff_week = difftime(date, deb_trimestre, units = \"weeks\"))\n\n\nCalculer la date de fin de trimestre.\n\n\nCode\n... %&gt;% mutate(fin_trim = (date + months(1)) - 1)\n\n\nCr√©er une variable indiquant le trimestre via la fonction quarter().\n\n\nCode\n... %&gt;% mutate(trim = quarter(date))\n\n\nRecr√©er la variable trimestre au format ‚Äú2016-T1‚Äù.\n\n\nCode\n... %&gt;% mutate(trim = quarter(date))\n\n\n\n\n\n\n4 Visualisation graphique\nDes biblioth√®ques graphiques sont √† disposition (r-graph-gallery ou r-charts) pour trouver des templates de visualisation et le code associ√©.\n\nCr√©er un graphique simple avec la date et le nombre de demandeurs d‚Äôemploi en utilisant la fonction plot()\n\n\nCode\nplot(defm$date, defm$defmA)\n\n\nCr√©er une ligne simple avec la date et le nombre de demandeurs d‚Äôemploi en utilisant la fonction ggplot()\n\n\nCode\nggplot(defm, aes(x=date, y=defmA)) +\n  geom_line()\n\n\nAjouter un titre avec ggtitle().\n\n\nCode\nggplot(defm, aes(x=date, y=defmA)) +\n  geom_line()+\n  ggtitle(\"Titre\")\n\n\nAjouter une seconde courbe, par exemple celle de l‚Äôensemble des demandeurs d‚Äôemploi inscrits en cat√©gories A, B ou C.\n\n\nCode\nggplot(defm) +\n  geom_line(aes(x=date, y=defmA))+\n  geom_line(aes(x=date, y=defmABC))+\n  ggtitle(\"Titre\")\n\n\nCr√©er un barlpot avec la sp√©cification geom_bar().\n\n\nCode\nggplot(defm, aes(x=date, y=defmA)) + \n  geom_bar(stat = \"identity\")\n\n\nCr√©er un histograme avec la sp√©cification geom_histogram().\n\n\nCode\nggplot(defm, aes(x=defmA)) +\n  geom_histogram()",
    "crumbs": [
      "Exercice 4"
    ]
  },
  {
    "objectID": "exercice_3.html",
    "href": "exercice_3.html",
    "title": "Exercice 3 : Statistiques descriptives",
    "section": "",
    "text": "Nous avons pr√©c√©demment cr√©√© une base de travail propre permettant d‚Äôen retirer des statistiques descriptives. Celles-ci peuvent √™tre calcul√©es de fa√ßon √† r√©sumer le dataframe ou bien √™tre int√©gr√©es √† celui-ci via une variable suppl√©mentaire.\n\n1 Commencer un programme\n\nCr√©er un nouveau programme puis l‚Äôenregister dans le projet cr√©√© pr√©cedemment.\nCharger les packages dplyr, lubridate, tidyr.\n\n\nCode\n#install.packages(\"ggplot\") # Permet d'installer le package si besoin\nlibrary(dplyr)\nlibrary(lubridate) # Package de gestion des dates\nlibrary(tidyr)\nlibrary(Hmisc)\n\n\nImporter le dataframe pr√©c√©demment enregistr√© au format .xlsx.\n\n\nCode\ndf_final &lt;- read.xlsx(\"df.xlsx\") # Chargement du dataframe\n\n\n\n\n\n\n2 Produire des statistiques descriptives pour r√©sumer ses donn√©es\nNos donn√©es sont d√©sormais propres, on peut donc commencer √† faire des statistiques descriptives par cat√©gorie.\n\nConnaitre les statistiques descriptives du dataframe avec summary().\n\n\nCode\nsummary(df_final) # Permet de connaitre les statistiques descriptives des variables du dataframe\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nLa fonction summary() utilis√©e ici ne tient pas compte des pond√©rations. Les statistiques calcul√©es √† partir de la table de l‚ÄôEEC doivent √™tre pond√©r√©es.\n\n\n\nA l‚Äôaide de pipe, faire la somme des effectifs par trimestre avec la fonction summarise().\n\n\nCode\nnb_individu &lt;- df_final %&gt;% \n  group_by(trimestre) %&gt;% \n  summarise(effectifs = sum(POIDS)) \nnb_individu\n\n\nFaire la somme des effectifs pond√©r√©s par trimestre avec la fonction wtd.table() du package Hmisc.\n\n\nCode\nwtd.table(x = df_final$TRIM, weights = df_final$POIDS)\n\n\nCalculer les effectifs par modalit√©s de la NAF en 88 postes, en utilisant la variable Libell√© pour que les r√©sultats soient lisibles.\n\n\nCode\nnb_individu_NAF = df_final %&gt;% \n  group_by(Libell√©) %&gt;% \n  summarise(effectifs = sum(POIDS))\n\n\n\n\n\n\n3 Produire des statistiques descriptives dans un dataframe exhaustif\nAuparavant, nous avons vu comment r√©sumer un dataframe √† l‚Äôaide de group_by() et summarise(). On cherche d√©sormais √† ajouter des variables agr√©g√©es dans le dataframe sans perdre l‚Äôinformation au niveau individuel.\n\nA partir du dataframe, ajouter une variable indiquant le nombre d‚Äôindividus moyen par trimestre et statut_activite_libelle √† l‚Äôaide de mutate().\n\n\nCode\n   ... %&gt;% \n  group_by(trimestre, statut_activite_libelle) %&gt;% \n  mutate(sum_actif = sum(POIDS)) %&gt;% \n  ungroup()\n\n\nAjouter ensuite une variable du nombre total d‚Äôindividus sur le trimestre.\n\n\nCode\n... %&gt;% \n  group_by(trimestre) %&gt;% \n  mutate(indiv_trim = sum(POIDS, na.rm = TRUE)) \n\n\n\n\n\n\n4 Calculer le nombre de ch√¥meurs par trimestre\n\nCr√©er un dataframe de r√©sultat avec le nombre d‚Äôindividus par trimestre et cat√©gorie (statut_activite_libelle) avec la fonction group_by().\n\n\nCode\nchomage &lt;- df_final %&gt;% \n  group_by(trimestre, statut_activite_libelle) %&gt;% \n  summarise(effectif_actif_trim = sum(POIDS, na.rm = TRUE)) \n\n\nCalculer la part de chaque modalit√© par trimestre dans le nombre d‚Äôindividus total du trimestre.\n\n\nCode\ntaux_chomage &lt;- chomage %&gt;% \n  group_by(trimestre) %&gt;% \n  mutate(effectif_total = sum(effectif_actif_trim, na.rm = TRUE)) %&gt;% \n  ungroup() %&gt;% \n  mutate(taux = (effectif_actif_trim / effectif_total)*100)\n\n\n\n\n\n\n5 Mettre en forme ses r√©sultats\n\nCr√©er un dataframe avec les effectifs pond√©r√©s par statut d‚Äôactivit√© et par trimestre avec en colonne le statut d‚Äôactivit√© et en ligne le trimestre √† l‚Äôaide de la fonction pivot_wider() (2 √©tapes).\n\n\nCode\ndf_eff_trim_activite &lt;- df_final %&gt;%\n  group_by(trimestre, statut_activite_libelle) %&gt;%\n  summarise(effectifs = sum(POIDS))\n\ndf_pivot &lt;- df_eff_trim_activite %&gt;% \n  pivot_wider(names_from = c(statut_activite_libelle), values_from = c(effectifs))\n\n\nFaire l‚Äôop√©ration inverse √† l‚Äôaide de la fonction pivot_longer().\n\n\nCode\ndf_unpivot &lt;- df_pivot %&gt;% \n  pivot_longer(!c(trimestre), names_to = \"statut_activite_libelle\", values_to = \"effectifs\")\n\n\n\n\n\n6 Exporter ses r√©sultats\n\nT√©l√©charger et charger le package xlsx.\n\n\nCode\n#install.packages(xlsx) # Installation du package\nlibrary(xlsx) # Chargement du package\n\n\nExporter le dataframe de statistique descriptive en .xlsx via la fonction write_xlsx().\n\n\nCode\nwrite_xlsx(df_pivot, \"resultat.xlsx\") # Export du fichier excel\n\n\nExporter plusieurs de ses r√©sultats dans un seul fichier excel via list() et la fonction write_xlsx().\n\n\nCode\nliste_onglet = list(\"statut_bit\" = df_pivot,\n                \"taux_chomage\" = taux_chomage)\nwrite_xlsx(liste_onglet, \"resultat_total.xlsx\") # Export du fichier excel\n\n\nExporter ses r√©sultats au format .csv avec write_csv2().\n\n\nCode\nwrite.csv2()",
    "crumbs": [
      "Exercice 3"
    ]
  },
  {
    "objectID": "ressources.html",
    "href": "ressources.html",
    "title": "Ressources",
    "section": "",
    "text": "De nombreuses ressources R sont disponibles en libre acc√®s. Nous vous proposons ci-dessous une liste de ressources utiles (packages, sites, etc). Vous pourrez √©galement trouver de nombreuses informations sur GitHub et GitLab.\n\n1 Packages th√©matiques\n\nggplot concernant la cr√©ation de graphqiques.\nlubridate concernant la gestion des dates.\nHmisc concernant le traitement des donn√©es pond√©r√©es.\nArrow concernant le traitement des donn√©es volumineuses (fichier .parquet).\nSparlyr concernant le calcul distribu√©.\nRJDemetra concernant la d√©saisonnalisation avec Jdemetra+.\n\n\n\n2 Sites üíª\n\nutilitR : Documentation sur l‚Äôusage de R cr√©√© par l‚ÄôINSEE\nR for Data Science : Le√ßon sur la prise en main de R\nr-graph-gallery ou r-charts : Biblioth√®ques de graphique sous R\nThe Epidemiologist R Handbook : Le√ßon sur la prise en main de R fait pour des √©pid√©milogistes mais qui reprend la majorit√© des outiles utiles.\n\n\n\n3 Canaux de discussion üí¨\n\nTchap Dares\nTchap SSM\n\n\n\n4 Outils üß∞\n\nChatGPT ou Huggingface : Agents conversationnels permettant √©galement de r√©pondre √† des probl√®mes de code.\n\n\n\n\n\n\n\nImportant\n\n\n\nAttention, le secret statistique doit √™tre respect√© lorsque vous utilisez un agent conversationnel. Aucune donn√©e ou information identifiante ne doit √™tre utilis√©e avec ces outils.",
    "crumbs": [
      "Ressources"
    ]
  }
]